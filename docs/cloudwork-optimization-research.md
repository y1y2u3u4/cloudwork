# CloudWork ä¼˜åŒ–è°ƒç ”æŠ¥å‘Š

> è°ƒç ”æ—¥æœŸ: 2026-01-25
> è°ƒç ”ç›®æ ‡: åˆ†æè¡Œä¸šé¢†å…ˆçš„ Claude Code Telegram Bot é¡¹ç›®ï¼Œæå‡º CloudWork ä¼˜åŒ–å»ºè®®

---

## ä¸€ã€è°ƒç ”é¡¹ç›®æ¦‚è§ˆ

### 1.1 ClawdBot ([github.com/clawdbot/clawdbot](https://github.com/clawdbot/clawdbot))

**å®šä½**: å¤šæ¸ é“ã€ä¼ä¸šçº§ AI åŠ©æ‰‹å¹³å°

**æ ¸å¿ƒæ¶æ„**:
- æœ¬åœ°ä¼˜å…ˆçš„ WebSocket Gateway (`ws://127.0.0.1:18789`)
- å¤šæ¸ é“ç»Ÿä¸€æ¥å…¥ (Telegram/WhatsApp/Slack/Discord/Teams/iMessage ç­‰)
- Docker æ²™ç®±éš”ç¦»éä¸»ä¼šè¯
- Canvas/A2UI å¯è§†åŒ–å·¥ä½œåŒº

**æŠ€æœ¯äº®ç‚¹**:
| ç‰¹æ€§ | å®ç°æ–¹å¼ |
|------|----------|
| å¤šæ¸ é“è·¯ç”± | ç‹¬ç«‹é€‚é…å™¨ (grammY/Baileys/discord.js) |
| ä¼šè¯éš”ç¦» | main ä¼šè¯ + Docker æ²™ç®±åŒ– group ä¼šè¯ |
| å®æ—¶æµå¼ | WebSocket + å¯é…ç½®åˆ†å—ç­–ç•¥ |
| å¯è§†åŒ– | Canvas/A2UI åè®®æ”¯æŒå›¾å½¢ç•Œé¢ |
| å®‰å…¨ | é…å¯¹ç éªŒè¯ + DM ç™½åå• |

---

### 1.2 linuz90/claude-telegram-bot ([github.com/linuz90/claude-telegram-bot](https://github.com/linuz90/claude-telegram-bot))

**å®šä½**: ä¸ªäººåŠ©æ‰‹å‹ Claude Code Bot

**æ ¸å¿ƒæ¶æ„**:
- Bun è¿è¡Œæ—¶ + Claude Agent SDK
- CLI è®¤è¯ä¼˜å…ˆ
- MCP æœåŠ¡å™¨é›†æˆ

**æŠ€æœ¯äº®ç‚¹**:
| ç‰¹æ€§ | å®ç°æ–¹å¼ |
|------|----------|
| å®æ—¶å·¥å…·å±•ç¤º | æµå¼æ›´æ–°æ˜¾ç¤ºå½“å‰å·¥å…·è°ƒç”¨ |
| äº¤äº’å¼æŒ‰é’® | `ask_user` MCP å·¥å…·æ¸²æŸ“å†…è”æŒ‰é’® |
| å¤šåª’ä½“æ”¯æŒ | è¯­éŸ³(OpenAIè½¬å½•)/å›¾ç‰‡/PDF/ZIP |
| ä¼šè¯æ¢å¤ | `/resume` æ˜¾ç¤ºæœ€è¿‘5ä¸ªä¼šè¯+æ‘˜è¦ |
| æ€ç»´å¯è§†åŒ– | è§¦å‘è¯æ˜¾ç¤ºæ‰©å±•æ€è€ƒè¿‡ç¨‹ |
| 6å±‚å®‰å…¨ | ç™½åå•â†’æ„å›¾åˆ†ç±»â†’è·¯å¾„éªŒè¯â†’å‘½ä»¤æ£€æŸ¥â†’é™æµâ†’å®¡è®¡ |

---

### 1.3 RichardAtCT/claude-code-telegram ([github.com/RichardAtCT/claude-code-telegram](https://github.com/RichardAtCT/claude-code-telegram))

**å®šä½**: è¿œç¨‹å¼€å‘ç»ˆç«¯

**æ ¸å¿ƒæ¶æ„**:
- Python SDK / CLI åŒæ¨¡å¼
- SQLite ä¼šè¯æŒä¹…åŒ–
- å¿«é€Ÿæ“ä½œç³»ç»Ÿ

**æŠ€æœ¯äº®ç‚¹**:
| ç‰¹æ€§ | å®ç°æ–¹å¼ |
|------|----------|
| æ–‡ä»¶å¤„ç† | å•æ–‡ä»¶/ZIP/TAR æ™ºèƒ½åˆ†æ |
| Git é›†æˆ | çŠ¶æ€/å·®å¼‚/å†å²æŸ¥çœ‹ |
| ä¼šè¯å¯¼å‡º | Markdown/HTML/JSON å¤šæ ¼å¼ |
| å¿«æ·æŒ‰é’® | ä¸Šä¸‹æ–‡æ„ŸçŸ¥çš„æµ‹è¯•/å®‰è£…/æ ¼å¼åŒ–æŒ‰é’® |
| ç›®å½•éš”ç¦» | ä¸¥æ ¼çš„é¡¹ç›®ç›®å½•ç™½åå• |

---

### 1.4 everything-claude-code ([github.com/affaan-m/everything-claude-code](https://github.com/affaan-m/everything-claude-code))

**å®šä½**: Claude Code æ’ä»¶/é…ç½®é›†åˆ (é Bot)

**æ ¸å¿ƒæ¶æ„**:
- æ¨¡å—åŒ–ç»„ä»¶: Agents / Skills / Commands / Rules / Hooks
- è·¨å¹³å° Node.js è„šæœ¬
- æ’ä»¶å¸‚åœºåˆ†å‘

**æŠ€æœ¯äº®ç‚¹**:
| ç‰¹æ€§ | å®ç°æ–¹å¼ |
|------|----------|
| ä¸“ä¸šåŒ–å­ä»£ç† | code-reviewer/architect/tdd-guide |
| æŠ€èƒ½ç³»ç»Ÿ | é¢†åŸŸçŸ¥è¯†å°è£… + æŒç»­å­¦ä¹  |
| Hook è‡ªåŠ¨åŒ– | PreToolUse/PostToolUse/Stop äº‹ä»¶ |
| ä¸Šä¸‹æ–‡ä¼˜åŒ– | <10 MCP + <80 å·¥å…·ä¿æŒçª—å£ |
| ä¼šè¯æŒä¹…åŒ– | Hook è‡ªåŠ¨ä¿å­˜/åŠ è½½ä¸Šä¸‹æ–‡ |

---

## äºŒã€CloudWork ç°çŠ¶åˆ†æ

### 2.1 å½“å‰æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Telegram   â”‚â—„â”€â”€â”€â”€â–ºâ”‚      VPS (Python Bot)            â”‚
â”‚   Client    â”‚      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚  â”‚ src/bot/                   â”‚  â”‚
                     â”‚  â”‚  â”œâ”€ main.py                â”‚  â”‚
                     â”‚  â”‚  â”œâ”€ handlers/              â”‚  â”‚
                     â”‚  â”‚  â”‚   â”œâ”€ commands.py        â”‚  â”‚
                     â”‚  â”‚  â”‚   â”œâ”€ messages.py        â”‚  â”‚
                     â”‚  â”‚  â”‚   â””â”€ callbacks.py       â”‚  â”‚
                     â”‚  â”‚  â””â”€ services/              â”‚  â”‚
                     â”‚  â”‚      â”œâ”€ claude.py (CLIæ‰§è¡Œ)â”‚  â”‚
                     â”‚  â”‚      â”œâ”€ session.py         â”‚  â”‚
                     â”‚  â”‚      â””â”€ cron_*.py          â”‚  â”‚
                     â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                     â”‚              â”‚                   â”‚
                     â”‚              â–¼                   â”‚
                     â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
                     â”‚     â”‚  Claude CLI     â”‚         â”‚
                     â”‚     â”‚  (subprocess)   â”‚         â”‚
                     â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 ç°æœ‰åŠŸèƒ½

| åŠŸèƒ½ç±»åˆ« | å·²å®ç° | ç«å“å¯¹æ¯” |
|----------|--------|----------|
| ä¼šè¯ç®¡ç† | âœ… å¤šä¼šè¯/è‡ªåŠ¨å½’æ¡£/å›å¤åˆ‡æ¢ | åŸºæœ¬æŒå¹³ |
| æµå¼è¾“å‡º | âœ… stream-json è§£æ | ç¼ºå°‘å·¥å…·è¯¦æƒ…å±•ç¤º |
| äº¤äº’é—®ç­” | âœ… AskUserQuestion æŒ‰é’® | åŠŸèƒ½å®Œæ•´ |
| å¤šé¡¹ç›® | âœ… workspace å±‚çº§æµè§ˆ | åŠŸèƒ½å®Œæ•´ |
| å®šæ—¶ä»»åŠ¡ | âœ… cron + Bot é€šçŸ¥ | ç‹¬ç‰¹ä¼˜åŠ¿ |
| æŠ€èƒ½ç³»ç»Ÿ | âš ï¸ åŸºç¡€å®ç° | è¿œä¸åŠ everything-claude-code |
| å¤šåª’ä½“ | âŒ ä¸æ”¯æŒ | æ˜æ˜¾å·®è· |
| æ¡Œé¢çº§UI | âŒ çº¯æ–‡æœ¬ | æ˜æ˜¾å·®è· |

### 2.3 æŠ€æœ¯å€ºåŠ¡

1. **CLI å­è¿›ç¨‹æ¨¡å¼**: æ— æ³•ä½¿ç”¨ Agent SDK é«˜çº§ç‰¹æ€§
2. **çº¯æ–‡æœ¬è¾“å‡º**: ç¼ºä¹ç»“æ„åŒ–å±•ç¤º
3. **æ— æ–‡ä»¶ä¸Šä¼ **: ä¸æ”¯æŒå›¾ç‰‡/æ–‡æ¡£åˆ†æ
4. **å•æ¸ é“**: ä»…æ”¯æŒ Telegram

---

## ä¸‰ã€ä¼˜åŒ–å»ºè®®

### 3.1 çŸ­æœŸä¼˜åŒ– (1-2å‘¨)

#### 3.1.1 å¢å¼ºè¾“å‡ºå±•ç¤º

**ç›®æ ‡**: æå‡ä¿¡æ¯å¯†åº¦å’Œå¯è¯»æ€§

```
å½“å‰:
ğŸ”§ æ­£åœ¨ä½¿ç”¨å·¥å…·: Read (5)
æ­£åœ¨è¯»å–æ–‡ä»¶...

ä¼˜åŒ–å:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“– Read â†’ src/bot/main.py
   â”œâ”€ è¡Œæ•°: 1-50
   â””â”€ çŠ¶æ€: âœ“ å®Œæˆ (0.3s)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
```

**å®ç°æ–¹æ¡ˆ**:
- è§£æ `tool_use` äº‹ä»¶çš„ `input` å‚æ•°
- ä½¿ç”¨ Telegram ç­‰å®½å­—ä½“ (`<pre>`) æ¸²æŸ“ç»“æ„åŒ–è¾“å‡º
- å·¥å…·æ‰§è¡Œæ—¶é—´ç»Ÿè®¡

#### 3.1.2 ä¼šè¯æ¢å¤å¢å¼º

**ç›®æ ‡**: ç±»ä¼¼ linuz90 çš„ `/resume` åŠŸèƒ½

```
/resume å‘½ä»¤è¾“å‡º:
ğŸ“‹ æœ€è¿‘ä¼šè¯:
1ï¸âƒ£ [é‡æ„è®¤è¯æ¨¡å—] 3æ¡æ¶ˆæ¯ Â· 10åˆ†é’Ÿå‰
   "å¸®æˆ‘é‡æ„è¿™ä¸ª auth.py..."
2ï¸âƒ£ [Trading Monitor] 5æ¡æ¶ˆæ¯ Â· 1å°æ—¶å‰
   "æ£€æŸ¥ä¸‹å®šæ—¶ä»»åŠ¡ä¸ºä»€ä¹ˆ..."
3ï¸âƒ£ [æ·»åŠ  Cron ç®¡ç†] 8æ¡æ¶ˆæ¯ Â· 2å°æ—¶å‰
   ...
```

**å®ç°æ–¹æ¡ˆ**:
- `session_manager` æ·»åŠ é¦–æ¡æ¶ˆæ¯æ‘˜è¦å­˜å‚¨
- æ–°å¢ `/resume` å‘½ä»¤
- æŒ‰é’®å¿«é€Ÿåˆ‡æ¢

#### 3.1.3 å¿«æ·æ“ä½œæŒ‰é’®

**ç›®æ ‡**: ä¸Šä¸‹æ–‡æ„ŸçŸ¥çš„å¸¸ç”¨æ“ä½œ

```
æ‰§è¡Œå®Œæˆåæ˜¾ç¤º:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ”„ ç»§ç»­   â”‚ ğŸ“ æäº¤   â”‚ ğŸ§ª æµ‹è¯• â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å®ç°æ–¹æ¡ˆ**:
- æ ¹æ®æœ€åå·¥å…·è°ƒç”¨ç±»å‹æ¨æ–­ä¸Šä¸‹æ–‡
- Edit/Write åæ˜¾ç¤ºã€Œæäº¤ã€
- ä»£ç ä¿®æ”¹åæ˜¾ç¤ºã€Œæµ‹è¯•ã€
- é€šç”¨æ˜¾ç¤ºã€Œç»§ç»­ã€

---

### 3.2 ä¸­æœŸä¼˜åŒ– (1-2æœˆ)

#### 3.2.1 å¤šåª’ä½“æ”¯æŒ

**ä¼˜å…ˆçº§**: â­â­â­ (å·®è·æ˜æ˜¾)

| ç±»å‹ | å®ç°æ–¹æ¡ˆ |
|------|----------|
| å›¾ç‰‡ | ä¸‹è½½åˆ°ä¸´æ—¶ç›®å½•ï¼Œé™„åŠ åˆ° prompt |
| è¯­éŸ³ | OpenAI Whisper API è½¬å½• |
| æ–‡æ¡£ | PDFâ†’æ–‡æœ¬, ZIP/TAR è§£å‹åˆ†æ |
| ä»£ç æ–‡ä»¶ | ç›´æ¥è¯»å–å†…å®¹ |

**æŠ€æœ¯è¦ç‚¹**:
```python
# å›¾ç‰‡å¤„ç†ç¤ºä¾‹
async def handle_photo(update, context):
    photo = update.message.photo[-1]  # æœ€å¤§å°ºå¯¸
    file = await photo.get_file()
    path = f"/tmp/{photo.file_unique_id}.jpg"
    await file.download_to_drive(path)

    # é™„åŠ åˆ° prompt
    prompt = f"[å›¾ç‰‡: {path}]\n{update.message.caption or 'è¯·åˆ†æè¿™å¼ å›¾ç‰‡'}"
```

#### 3.2.2 æŠ€èƒ½ç³»ç»Ÿå‡çº§

**å€Ÿé‰´ everything-claude-code æ¶æ„**:

```
~/.claude/
â”œâ”€â”€ agents/           # ä¸“ä¸šå­ä»£ç†
â”‚   â”œâ”€â”€ code-reviewer.md
â”‚   â””â”€â”€ architect.md
â”œâ”€â”€ skills/           # é¢†åŸŸçŸ¥è¯†
â”‚   â”œâ”€â”€ python-patterns.md
â”‚   â””â”€â”€ trading-strategies.md
â”œâ”€â”€ commands/         # æ–œæ å‘½ä»¤
â”‚   â”œâ”€â”€ review.md
â”‚   â””â”€â”€ plan.md
â””â”€â”€ hooks/            # äº‹ä»¶è‡ªåŠ¨åŒ–
    â”œâ”€â”€ pre-commit.js
    â””â”€â”€ session-persist.js
```

**Bot é›†æˆ**:
- `/skills` å‘½ä»¤åˆ—å‡ºå¯ç”¨æŠ€èƒ½
- `/skill <name>` æ¿€æ´»ç‰¹å®šæŠ€èƒ½
- ä¼šè¯çº§æŠ€èƒ½ä¸Šä¸‹æ–‡æ³¨å…¥

#### 3.2.3 å·¥å…·æ‰§è¡Œè¯¦æƒ…é¢æ¿

**ç›®æ ‡**: ç±»ä¼¼æ¡Œé¢ IDE çš„å·¥å…·è°ƒç”¨å±•ç¤º

```
â”â”â” å·¥å…·æ‰§è¡Œè®°å½• â”â”â”
1. ğŸ“– Read(src/config.py) â†’ 120è¡Œ âœ“
2. ğŸ” Grep("API_KEY") â†’ 3ä¸ªåŒ¹é… âœ“
3. âœï¸ Edit(src/config.py:45) â†’ è¿›è¡Œä¸­...
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
```

**å®ç°æ–¹æ¡ˆ**:
- ä»»åŠ¡çº§å·¥å…·è°ƒç”¨å†å²è®°å½•
- å®šæœŸæ›´æ–°ã€Œå·¥å…·é¢æ¿ã€æ¶ˆæ¯
- å¯å±•å¼€/æŠ˜å è¯¦æƒ…

---

### 3.3 é•¿æœŸä¼˜åŒ– (3-6æœˆ)

#### 3.3.1 è¿ç§»åˆ° Claude Agent SDK

**æ”¶ç›Š**:
- åŸç”Ÿ MCP å·¥å…·æ”¯æŒ
- æ›´å¥½çš„æµå¼å¤„ç†
- ä¼šè¯çŠ¶æ€ç®¡ç†
- å‡å°‘ CLI è§£æ hack

**æŒ‘æˆ˜**:
- éœ€è¦é‡å†™æ ¸å¿ƒæ‰§è¡Œé€»è¾‘
- ä¾èµ– Node.js/Bun è¿è¡Œæ—¶

**æ··åˆæ–¹æ¡ˆ**:
```
Python Bot (Telegram äº¤äº’)
    â”‚
    â–¼
Node.js Bridge (WebSocket)
    â”‚
    â–¼
Claude Agent SDK
```

#### 3.3.2 Canvas/å¯è§†åŒ–ç•Œé¢

**å€Ÿé‰´ ClawdBot A2UI**:

- ä»£ç å·®å¼‚å¯è§†åŒ–
- æ–‡ä»¶æ ‘å¯¼èˆª
- æ‰§è¡Œæµç¨‹å›¾

**Telegram é™åˆ¶**:
- ä»…æ”¯æŒ Inline Keyboard + æ–‡æœ¬
- å¯ç”¨ Web App çªç ´

**æ–¹æ¡ˆ**: Telegram Mini App
```
Bot æ¶ˆæ¯ + [æ‰“å¼€å·¥ä½œå°] æŒ‰é’®
         â”‚
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  WebView ç•Œé¢      â”‚
    â”‚  - ä»£ç ç¼–è¾‘å™¨      â”‚
    â”‚  - æ–‡ä»¶æ ‘          â”‚
    â”‚  - ç»ˆç«¯è¾“å‡º        â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3.3.3 å¤šæ¸ é“æ”¯æŒ

**ä¼˜å…ˆçº§é¡ºåº**:
1. **Web ç•Œé¢** - å®Œæ•´æ¡Œé¢ä½“éªŒ
2. **Discord** - å¼€å‘è€…ç¤¾åŒº
3. **Slack** - ä¼ä¸šåœºæ™¯

---

## å››ã€ä¼˜åŒ–è·¯çº¿å›¾

```
Phase 1 (1-2å‘¨): ä½“éªŒä¼˜åŒ–
â”œâ”€ å¢å¼ºå·¥å…·æ‰§è¡Œå±•ç¤º
â”œâ”€ ä¼šè¯æ¢å¤ /resume
â””â”€ å¿«æ·æ“ä½œæŒ‰é’®

Phase 2 (1-2æœˆ): èƒ½åŠ›æ‰©å±•
â”œâ”€ å¤šåª’ä½“æ”¯æŒ (å›¾ç‰‡/è¯­éŸ³/æ–‡æ¡£)
â”œâ”€ æŠ€èƒ½ç³»ç»Ÿå‡çº§
â””â”€ å·¥å…·æ‰§è¡Œé¢æ¿

Phase 3 (3-6æœˆ): æ¶æ„å‡çº§
â”œâ”€ Agent SDK è¿ç§»è¯„ä¼°
â”œâ”€ Telegram Mini App (å¯è§†åŒ–)
â””â”€ å¤šæ¸ é“é€‚é…
```

---

## äº”ã€å…³é”®ç»“è®º

### 5.1 CloudWork ç«äº‰ä¼˜åŠ¿

1. **å®šæ—¶ä»»åŠ¡ç³»ç»Ÿ** - ç‹¬ç‰¹çš„ cron + Bot é€šçŸ¥æ¶æ„
2. **è½»é‡éƒ¨ç½²** - çº¯ Pythonï¼Œæ— å¤æ‚ä¾èµ–
3. **é¡¹ç›®ç®¡ç†** - å®Œå–„çš„å¤šé¡¹ç›®æ”¯æŒ

### 5.2 éœ€é‡ç‚¹æ”¹è¿›

1. **å¤šåª’ä½“æ”¯æŒ** - è¡Œä¸šæ ‡é…ï¼Œå¿…é¡»è¡¥é½
2. **è¾“å‡ºå±•ç¤º** - æå‡ä¿¡æ¯å¯†åº¦å’Œå¯è¯»æ€§
3. **æŠ€èƒ½ç”Ÿæ€** - å€Ÿé‰´ everything-claude-code æ¨¡å¼

### 5.3 å·®å¼‚åŒ–æ–¹å‘

**å»ºè®®å®šä½**: é¢å‘**é‡åŒ–äº¤æ˜“/è‡ªåŠ¨åŒ–è¿ç»´**åœºæ™¯çš„ä¸“ä¸š Claude Code Bot

- å¼ºåŒ–å®šæ—¶ä»»åŠ¡ + ç›‘æ§å‘Šè­¦
- Trading ç­–ç•¥å¼€å‘/å›æµ‹é›†æˆ
- æœåŠ¡å™¨è¿ç»´è‡ªåŠ¨åŒ–

---

## å…­ã€ClawdBot æºç æ·±åº¦åˆ†æ

> åŸºäº git clone åçš„æºç åˆ†æï¼Œå¯¹æ¯” CloudWork çš„æŠ€æœ¯å®ç°å·®å¼‚

### 6.1 æ¶æ„å¯¹æ¯”

| ç»´åº¦ | ClawdBot | CloudWork |
|------|----------|-----------|
| **è¯­è¨€** | TypeScript (Bun) | Python 3.9+ |
| **Bot æ¡†æ¶** | grammY | python-telegram-bot |
| **Claude é›†æˆ** | Agent SDK åŸç”Ÿ | CLI subprocess |
| **æ¶ˆæ¯æµ** | äº‹ä»¶é©±åŠ¨ Pipeline | åŒæ­¥å¾ªç¯å¤„ç† |
| **æµå¼è¾“å‡º** | Draft Streaming + Block Chunking | ç®€å• editMessage |
| **ä¼šè¯å­˜å‚¨** | æ–‡ä»¶ç³»ç»Ÿ + å†…å­˜ç¼“å­˜ | JSON æ–‡ä»¶ |

### 6.2 æ ¸å¿ƒæŠ€æœ¯å·®å¼‚

#### 6.2.1 æ¶ˆæ¯å¤„ç†æµç¨‹

**ClawdBot æ¨¡å¼** (Pipeline æ¶æ„):
```
æ”¶åˆ°æ¶ˆæ¯ â†’ buildTelegramMessageContext()
         â†’ dispatchTelegramMessage()
         â†’ dispatchReplyWithBufferedBlockDispatcher()
         â†’ runReplyAgent()
         â†’ deliverReplies()
```

å…³é”®æ–‡ä»¶:
- `src/telegram/bot-message.ts`: æ¶ˆæ¯å¤„ç†å™¨å·¥å‚
- `src/telegram/bot-message-dispatch.ts`: åˆ†å‘é€»è¾‘
- `src/auto-reply/reply/agent-runner.ts`: Agent æ‰§è¡Œæ ¸å¿ƒ

**CloudWork æ¨¡å¼** (ç›´æ¥è°ƒç”¨):
```
æ”¶åˆ°æ¶ˆæ¯ â†’ handle_message()
         â†’ claude_executor.execute_stream()
         â†’ _process_stream() å¾ªç¯è¯»å– stdout
         â†’ progress_callback() æ›´æ–°æ¶ˆæ¯
```

å…³é”®æ–‡ä»¶:
- `src/bot/handlers/messages.py`: æ¶ˆæ¯å¤„ç†
- `src/bot/services/claude.py`: CLI æ‰§è¡Œå™¨

#### 6.2.2 æµå¼è¾“å‡ºæŠ€æœ¯

**ClawdBot Draft Streaming** (`draft-stream.ts`):
```typescript
// ä½¿ç”¨ Telegram Draft API å®ç°å®æ—¶é¢„è§ˆ
createTelegramDraftStream({
  api: bot.api,
  chatId,
  draftId,
  maxChars: 4096,
  throttleMs: 300  // 300ms èŠ‚æµ
})

// ä¸‰å±‚ç¼“å†²:
// 1. pendingText - å¾…å‘é€æ–‡æœ¬
// 2. inFlight - æ­£åœ¨å‘é€
// 3. lastSentText - å·²å‘é€ï¼ˆç”¨äºå»é‡ï¼‰
```

**CloudWork ç®€å•ç¼–è¾‘**:
```python
# ç›´æ¥ç¼–è¾‘æ¶ˆæ¯ï¼Œæ— å¤æ‚ç¼“å†²
async def progress_callback(text, status):
    await safe_edit_message(status_message, text)
```

**å·®è·**: ClawdBot çš„ Draft Streaming å¯ä»¥åœ¨ç”¨æˆ·è¾“å…¥æ¡†æ˜¾ç¤ºå®æ—¶é¢„è§ˆï¼Œè€Œä¸æ˜¯é¢‘ç¹ç¼–è¾‘å·²å‘é€æ¶ˆæ¯ï¼Œä½“éªŒæ›´æµç•…ã€‚

#### 6.2.3 Block Chunking æ™ºèƒ½åˆ†å—

**ClawdBot** (`pi-embedded-block-chunker.ts`):
```typescript
// æ™ºèƒ½åˆ†å—ç­–ç•¥
class EmbeddedBlockChunker {
  #pickBreakIndex(buffer) {
    // ä¼˜å…ˆçº§: æ®µè½ > æ¢è¡Œ > å¥å· > ç©ºç™½
    // ç‰¹æ®Šå¤„ç†ä»£ç å—ï¼ˆä¸åœ¨ fence å†…éƒ¨åˆ†å‰²ï¼‰
    if (preference === "paragraph") {
      // æ‰¾åŒæ¢è¡Œåˆ†å‰²ç‚¹
    }
    // å¤„ç† Markdown fence è¾¹ç•Œ
    if (isSafeFenceBreak(fenceSpans, candidate)) {
      return { index: candidate };
    }
  }
}
```

**CloudWork**: æ— åˆ†å—é€»è¾‘ï¼Œç›´æ¥è¾“å‡ºå…¨éƒ¨æ–‡æœ¬ã€‚

**å·®è·**: ClawdBot å¯ä»¥ä¿è¯ Markdown ä»£ç å—ä¸ä¼šè¢«æˆªæ–­ï¼Œè¾“å‡ºæ ¼å¼æ›´å®Œæ•´ã€‚

#### 6.2.4 Typing æŒ‡ç¤ºå™¨ç®¡ç†

**ClawdBot** (`typing-mode.ts`):
```typescript
// ç²¾ç»†çš„ typing çŠ¶æ€æ§åˆ¶
createTypingSignaler({
  typing,
  mode: typingMode,  // "always" | "block" | "off"
  isHeartbeat
})

// æ”¯æŒ heartbeat æ¨¡å¼ä¿æŒ typing
```

**CloudWork**: æ— ç‹¬ç«‹ typing ç®¡ç†ï¼Œä»…ä¾èµ–æ¶ˆæ¯ç¼–è¾‘ã€‚

### 6.3 ä¼šè¯ç®¡ç†å¯¹æ¯”

**ClawdBot** (`sessions.ts`):
```typescript
interface SessionEntry {
  sessionId: string;
  sessionFile?: string;
  updatedAt: number;
  systemSent: boolean;
  abortedLastRun: boolean;
  contextTokens?: number;
  responseUsage?: "off" | "compact" | "full";
  compactionCount?: number;  // è‡ªåŠ¨å‹ç¼©è®¡æ•°
  groupActivationNeedsSystemIntro?: boolean;
}

// æ”¯æŒä¼šè¯é‡ç½®ã€å‹ç¼©ã€æ•…éšœæ¢å¤
const resetSession = async (failureLabel, buildLogMessage) => {
  // è‡ªåŠ¨å¤„ç†ä¼šè¯æŸå
}
```

**CloudWork** (`session.py`):
```python
class Session:
    id: str
    name: str
    created_at: datetime
    updated_at: datetime
    archived: bool = False
    message_count: int = 0
```

**å·®è·**: ClawdBot æœ‰æ›´å®Œå–„çš„ä¼šè¯ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼ˆå‹ç¼©ã€é‡ç½®ã€æ•…éšœæ¢å¤ï¼‰ã€‚

### 6.4 å¯å€Ÿé‰´çš„æŠ€æœ¯ç‚¹

#### 6.4.1 Draft Streaming (çŸ­æœŸå¯å®ç°)

**å®ç°å»ºè®®**:
```python
# ä½¿ç”¨ Telegram çš„ sendChatAction æŒç»­æ˜¾ç¤º typing
# ç»“åˆæ¶ˆæ¯ç¼–è¾‘å®ç°ç±»ä¼¼æ•ˆæœ
class ProgressStreamer:
    def __init__(self, bot, chat_id, message):
        self.last_update = 0
        self.throttle_ms = 300
        self.pending_text = ""

    async def update(self, text):
        now = time.time() * 1000
        if now - self.last_update < self.throttle_ms:
            self.pending_text = text
            return
        await self._flush()

    async def _flush(self):
        if self.pending_text:
            await safe_edit_message(self.message, self.pending_text)
            self.last_update = time.time() * 1000
```

#### 6.4.2 Block Chunking (ä¸­æœŸå®ç°)

**å®ç°å»ºè®®**:
```python
class MarkdownChunker:
    """æ™ºèƒ½ Markdown åˆ†å—å™¨"""

    def __init__(self, min_chars=500, max_chars=4000):
        self.buffer = ""
        self.min_chars = min_chars
        self.max_chars = max_chars

    def find_safe_break(self, text):
        """æ‰¾åˆ°å®‰å…¨çš„åˆ†å‰²ç‚¹ï¼ˆä¸åœ¨ä»£ç å—å†…ï¼‰"""
        # 1. è§£æä»£ç å—èŒƒå›´
        fences = self._parse_fences(text)
        # 2. ä¼˜å…ˆåœ¨æ®µè½è¾¹ç•Œåˆ†å‰²
        # 3. å…¶æ¬¡åœ¨æ¢è¡Œå¤„åˆ†å‰²
        # 4. å¤„ç†ä»£ç å—è¾¹ç•Œ
```

#### 6.4.3 Tool è¯¦æƒ…å±•ç¤º (çŸ­æœŸå¯å®ç°)

**å€Ÿé‰´ ClawdBot çš„å·¥å…·äº‹ä»¶å¤„ç†**:
```python
# è§£æ tool_use äº‹ä»¶çš„è¯¦ç»†å‚æ•°
async def _handle_tool_use(self, block, task):
    tool_name = block.get("name")
    tool_input = block.get("input", {})

    # æ ¹æ®å·¥å…·ç±»å‹æå–å…³é”®ä¿¡æ¯
    if tool_name == "Read":
        file_path = tool_input.get("file_path", "")
        task.tool_details.append(f"ğŸ“– Read â†’ {file_path}")
    elif tool_name == "Edit":
        file_path = tool_input.get("file_path", "")
        old_string = tool_input.get("old_string", "")[:30]
        task.tool_details.append(f"âœï¸ Edit â†’ {file_path}")
    elif tool_name == "Bash":
        command = tool_input.get("command", "")[:50]
        task.tool_details.append(f"ğŸ’» Bash â†’ {command}")
```

### 6.5 ä¸å»ºè®®å€Ÿé‰´çš„éƒ¨åˆ†

1. **å®Œæ•´è¿ç§»åˆ° TypeScript**: é‡æ„æˆæœ¬é«˜ï¼ŒPython ç”Ÿæ€è¶³å¤Ÿ
2. **å¤šæ¸ é“é€‚é…å™¨**: å½“å‰å•æ¸ é“å·²æ»¡è¶³éœ€æ±‚
3. **Docker æ²™ç®±**: å¢åŠ éƒ¨ç½²å¤æ‚åº¦ï¼Œä¸ªäººä½¿ç”¨åœºæ™¯ä¸éœ€è¦

### 6.6 æŠ€æœ¯å€ºåŠ¡ä¼˜å…ˆçº§

| å€ºåŠ¡ | ç´§æ€¥åº¦ | å¤æ‚åº¦ | å»ºè®® |
|------|--------|--------|------|
| æ¶ˆæ¯ç¼–è¾‘èŠ‚æµ | é«˜ | ä½ | ç«‹å³å®ç° |
| å·¥å…·è¯¦æƒ…å±•ç¤º | é«˜ | ä½ | ç«‹å³å®ç° |
| Markdown åˆ†å— | ä¸­ | ä¸­ | Phase 2 |
| ä¼šè¯æ•…éšœæ¢å¤ | ä¸­ | ä¸­ | Phase 2 |
| Agent SDK è¿ç§» | ä½ | é«˜ | é•¿æœŸè¯„ä¼° |

---

## ä¸ƒã€ClawdBot ç‹¬ç‰¹ä»·å€¼åˆ†æ

> åŸºäºæºç æ·±åº¦åˆ†æï¼ŒæŒ–æ˜ ClawdBot çš„ç‹¬ç‰¹ä»·å€¼å’Œ CloudWork ä¸å…·å¤‡çš„èƒ½åŠ›

### 7.1 å¤šæ¸ é“ç»Ÿä¸€æ¥å…¥ (12+ æ¸ é“)

ClawdBot æ”¯æŒçš„æ¸ é“è¿œè¶… CloudWork çš„å•ä¸€ Telegramï¼š

```
æ¸ é“çŸ©é˜µ:
â”œâ”€â”€ å³æ—¶é€šè®¯
â”‚   â”œâ”€â”€ WhatsApp (Baileys)
â”‚   â”œâ”€â”€ Telegram (grammY)
â”‚   â”œâ”€â”€ Signal (signal-cli)
â”‚   â””â”€â”€ iMessage (imsg)
â”œâ”€â”€ ä¼ä¸šåä½œ
â”‚   â”œâ”€â”€ Slack (Bolt)
â”‚   â”œâ”€â”€ Discord (discord.js)
â”‚   â”œâ”€â”€ Microsoft Teams
â”‚   â””â”€â”€ Google Chat (Chat API)
â”œâ”€â”€ ç¤¾äº¤/è‡ªæ‰˜ç®¡
â”‚   â”œâ”€â”€ Matrix
â”‚   â”œâ”€â”€ Zalo / Zalo Personal
â”‚   â”œâ”€â”€ BlueBubbles
â”‚   â”œâ”€â”€ Nextcloud Talk
â”‚   â””â”€â”€ Nostr
â””â”€â”€ Web
    â””â”€â”€ WebChat å†…åµŒ
```

**æºç è¯æ®** (`extensions/` ç›®å½•):
```
extensions/
â”œâ”€â”€ telegram/      # Telegram æ¸ é“æ’ä»¶
â”œâ”€â”€ discord/       # Discord æ¸ é“æ’ä»¶
â”œâ”€â”€ slack/         # Slack æ¸ é“æ’ä»¶
â”œâ”€â”€ whatsapp/      # WhatsApp æ¸ é“æ’ä»¶
â”œâ”€â”€ signal/        # Signal æ¸ é“æ’ä»¶
â”œâ”€â”€ imessage/      # iMessage æ¸ é“æ’ä»¶
â”œâ”€â”€ msteams/       # Microsoft Teams æ’ä»¶
â”œâ”€â”€ googlechat/    # Google Chat æ’ä»¶
â”œâ”€â”€ matrix/        # Matrix æ¸ é“æ’ä»¶
â”œâ”€â”€ zalo/          # Zalo æ¸ é“æ’ä»¶
â”œâ”€â”€ zalouser/      # Zalo Personal æ’ä»¶
â”œâ”€â”€ bluebubbles/   # BlueBubbles æ’ä»¶
â””â”€â”€ nostr/         # Nostr æ¸ é“æ’ä»¶
```

### 7.2 Canvas/A2UI å¯è§†åŒ–å·¥ä½œåŒº

ç±»ä¼¼ Claude Artifacts çš„å®æ—¶å¯è§†åŒ–ç•Œé¢ï¼š

```typescript
// src/agents/tools/canvas-tool.ts
const CANVAS_ACTIONS = [
  "present",      // æ˜¾ç¤º Canvas çª—å£
  "hide",         // éšè— Canvas
  "navigate",     // å¯¼èˆªåˆ°æŒ‡å®š URL
  "eval",         // æ‰§è¡Œ JavaScript ä»£ç 
  "snapshot",     // æˆªå– Canvas æˆªå›¾
  "a2ui_push",    // æ¨é€ A2UI ç»„ä»¶ (JSONL æ ¼å¼)
  "a2ui_reset",   // é‡ç½® A2UI çŠ¶æ€
]
```

**èƒ½åŠ›**:
- Claude å¯ä»¥å®æ—¶æ¸²æŸ“ HTML/React ç»„ä»¶
- æ”¯æŒ JavaScript æ‰§è¡Œå’Œæˆªå›¾
- A2UI åè®®å®ç°ç»“æ„åŒ– UI ç»„ä»¶æ¨é€

**CloudWork å·®è·**: å®Œå…¨æ²¡æœ‰å¯è§†åŒ–èƒ½åŠ›ï¼Œä»…çº¯æ–‡æœ¬è¾“å‡ºã€‚

### 7.3 è¯­éŸ³é€šè¯é›†æˆ

å®Œæ•´çš„ç”µè¯è¯­éŸ³é€šè¯èƒ½åŠ›ï¼š

```
Voice Call Plugin æ”¯æŒ:
â”œâ”€â”€ Twilio (Programmable Voice + Media Streams)
â”œâ”€â”€ Telnyx (Call Control v2)
â”œâ”€â”€ Plivo (Voice API + XML transfer + GetInput speech)
â””â”€â”€ Mock (æœ¬åœ°å¼€å‘æ¨¡å¼)

åŠŸèƒ½:
â”œâ”€â”€ å‘èµ·/æ¥å¬ç”µè¯
â”œâ”€â”€ TTS è¯­éŸ³åˆæˆ (OpenAI/ElevenLabs)
â”œâ”€â”€ å®æ—¶è¯­éŸ³å¯¹è¯
â”œâ”€â”€ Webhook ç­¾åéªŒè¯
â””â”€â”€ è¯­éŸ³æµå¼ä¼ è¾“
```

**æºç è¯æ®** (`extensions/voice-call/README.md`):
```bash
# CLI å‘½ä»¤
clawdbot voicecall call --to "+15555550123" --message "Hello"
clawdbot voicecall continue --call-id <id> --message "Any questions?"
clawdbot voicecall speak --call-id <id> --message "One moment"
clawdbot voicecall end --call-id <id>
```

**CloudWork å·®è·**: æ— ä»»ä½•è¯­éŸ³èƒ½åŠ›ã€‚

### 7.4 é•¿æœŸè®°å¿†ç³»ç»Ÿ (LanceDB)

åŸºäºå‘é‡æ•°æ®åº“çš„è¯­ä¹‰è®°å¿†ï¼š

```json
// extensions/memory-lancedb/clawdbot.plugin.json
{
  "id": "memory-lancedb",
  "kind": "memory",
  "configSchema": {
    "properties": {
      "embedding": {
        "properties": {
          "apiKey": { "type": "string" },
          "model": {
            "enum": ["text-embedding-3-small", "text-embedding-3-large"]
          }
        }
      },
      "autoCapture": { "type": "boolean" },  // è‡ªåŠ¨æ•è·é‡è¦ä¿¡æ¯
      "autoRecall": { "type": "boolean" }    // è‡ªåŠ¨æ³¨å…¥ç›¸å…³è®°å¿†
    }
  }
}
```

**èƒ½åŠ›**:
- è‡ªåŠ¨ä»å¯¹è¯ä¸­æ•è·é‡è¦ä¿¡æ¯
- è¯­ä¹‰æ£€ç´¢ç›¸å…³è®°å¿†æ³¨å…¥ä¸Šä¸‹æ–‡
- è·¨ä¼šè¯æŒä¹…åŒ–çŸ¥è¯†

**CloudWork å·®è·**: æ— é•¿æœŸè®°å¿†ï¼Œæ¯æ¬¡ä¼šè¯ç‹¬ç«‹ã€‚

### 7.5 Docker æ²™ç®±éš”ç¦»

å®‰å…¨çš„æ‰§è¡Œç¯å¢ƒéš”ç¦»ï¼š

```typescript
// src/agents/sandbox.ts
export {
  resolveSandboxDockerConfig,
  buildSandboxCreateArgs,
  listSandboxContainers,
  removeSandboxContainer,
  resolveSandboxToolPolicyForAgent,
}

// æ²™ç®±ç±»å‹å®šä¹‰
export type SandboxScope = "main" | "group" | "dm";
export type SandboxWorkspaceAccess = "read" | "readwrite" | "none";
```

**èƒ½åŠ›**:
- ç¾¤èŠä¼šè¯åœ¨ Docker å®¹å™¨ä¸­éš”ç¦»æ‰§è¡Œ
- é˜²æ­¢æ¶æ„ prompt æ³¨å…¥å½±å“ä¸»ç³»ç»Ÿ
- èµ„æºé™åˆ¶å’Œæƒé™æ§åˆ¶
- å·¥å…·çº§åˆ«çš„è®¿é—®ç­–ç•¥

**CloudWork å·®è·**: æ— éš”ç¦»ï¼Œæ‰€æœ‰å‘½ä»¤åœ¨ä¸»æœºç›´æ¥æ‰§è¡Œã€‚

### 7.6 æ’ä»¶ç”Ÿæ€ç³»ç»Ÿ

æ ‡å‡†åŒ–çš„æ’ä»¶æ¶æ„ï¼š

```typescript
// src/plugins/types.ts
export type ClawdbotPluginToolFactory = (
  ctx: ClawdbotPluginToolContext,
) => AnyAgentTool | AnyAgentTool[] | null | undefined;

export type ClawdbotPluginToolContext = {
  config?: ClawdbotConfig;
  workspaceDir?: string;
  agentDir?: string;
  agentId?: string;
  sessionKey?: string;
  messageChannel?: string;
  sandboxed?: boolean;
};
```

**æ’ä»¶ç±»å‹**:
```
extensions/
â”œâ”€â”€ æ¸ é“æ’ä»¶: telegram, discord, slack, whatsapp...
â”œâ”€â”€ è®¤è¯æ’ä»¶: google-gemini-cli-auth, copilot-proxy, qwen-portal-auth
â”œâ”€â”€ åŠŸèƒ½æ’ä»¶: voice-call, memory-lancedb, llm-task, lobster
â””â”€â”€ è¯Šæ–­æ’ä»¶: diagnostics-otel (OpenTelemetry é›†æˆ)
```

**CloudWork å·®è·**: æŠ€èƒ½ç³»ç»ŸåŸºç¡€ï¼Œæ— æ ‡å‡†åŒ–æ’ä»¶æ¥å£ã€‚

### 7.7 Hook äº‹ä»¶ç³»ç»Ÿ

ç±»ä¼¼ Git Hooks çš„äº‹ä»¶è‡ªåŠ¨åŒ–ï¼š

```typescript
// src/hooks/types.ts
export type ClawdbotHookMetadata = {
  always?: boolean;
  hookKey?: string;
  emoji?: string;
  events: string[];  // ["command:new", "session:start", "tool:pre", "tool:post"]
  requires?: {
    bins?: string[];
    anyBins?: string[];
    env?: string[];
    config?: string[];
  };
  install?: HookInstallSpec[];
};

export type Hook = {
  name: string;
  description: string;
  source: "clawdbot-bundled" | "clawdbot-managed" | "clawdbot-workspace" | "clawdbot-plugin";
  filePath: string;
  handlerPath: string;
};
```

**èƒ½åŠ›**:
- Pre/Post å·¥å…·è°ƒç”¨é’©å­
- ä¼šè¯ç”Ÿå‘½å‘¨æœŸäº‹ä»¶
- å‘½ä»¤æ‰§è¡Œå‰åè§¦å‘
- è‡ªå®šä¹‰è‡ªåŠ¨åŒ–é€»è¾‘

**CloudWork å·®è·**: æ— äº‹ä»¶é’©å­ç³»ç»Ÿã€‚

### 7.8 è¿œç¨‹å®¡æ‰¹ç³»ç»Ÿ

å±é™©æ“ä½œçš„è¿œç¨‹æˆæƒï¼š

```typescript
// src/auto-reply/reply/commands-approve.ts
const DECISION_ALIASES: Record<string, "allow-once" | "allow-always" | "deny"> = {
  allow: "allow-once",
  once: "allow-once",
  "allow-once": "allow-once",
  always: "allow-always",
  "allow-always": "allow-always",
  deny: "deny",
  reject: "deny",
  block: "deny",
};

// ä½¿ç”¨æ–¹å¼
// /approve <id> allow-once   - å•æ¬¡å…è®¸
// /approve <id> allow-always - æ°¸ä¹…å…è®¸
// /approve <id> deny         - æ‹’ç»
```

**èƒ½åŠ›**:
- å±é™© Bash å‘½ä»¤éœ€è¦äººå·¥å®¡æ‰¹
- æ”¯æŒå•æ¬¡/æ°¸ä¹…æˆæƒ
- è·¨æ¸ é“å®¡æ‰¹é€šçŸ¥

**CloudWork å·®è·**: æ— å®¡æ‰¹æœºåˆ¶ï¼Œä¾èµ– Claude CLI é»˜è®¤æƒé™ã€‚

### 7.9 åŸç”Ÿç§»åŠ¨ç«¯æ”¯æŒ

å®Œæ•´çš„è·¨å¹³å°å®¢æˆ·ç«¯ï¼š

```
å¹³å°æ”¯æŒ:
â”œâ”€â”€ macOS
â”‚   â”œâ”€â”€ èœå•æ åº”ç”¨ (Control UI)
â”‚   â”œâ”€â”€ Voice Wake (è¯­éŸ³å”¤é†’)
â”‚   â”œâ”€â”€ Talk Mode (è¯­éŸ³å¯¹è¯æµ®å±‚)
â”‚   â””â”€â”€ Canvas çª—å£
â”œâ”€â”€ iOS
â”‚   â”œâ”€â”€ Canvas æ¸²æŸ“
â”‚   â”œâ”€â”€ Voice Wake
â”‚   â”œâ”€â”€ Talk Mode
â”‚   â”œâ”€â”€ æ‘„åƒå¤´é›†æˆ
â”‚   â””â”€â”€ Bonjour é…å¯¹
â”œâ”€â”€ Android
â”‚   â”œâ”€â”€ Canvas æ¸²æŸ“
â”‚   â”œâ”€â”€ Talk Mode
â”‚   â”œâ”€â”€ æ‘„åƒå¤´é›†æˆ
â”‚   â””â”€â”€ çŸ­ä¿¡é›†æˆ (å¯é€‰)
â””â”€â”€ Web
    â””â”€â”€ WebChat å†…åµŒç•Œé¢
```

**CloudWork å·®è·**: ä»… Telegram Botï¼Œæ— åŸç”Ÿåº”ç”¨ã€‚

### 7.10 åŠŸèƒ½å¯¹æ¯”æ€»è¡¨

| åŠŸèƒ½ | ClawdBot | CloudWork | å·®è·è¯„ä¼° |
|------|----------|-----------|----------|
| **æ¸ é“æ•°é‡** | 12+ | 1 (Telegram) | ğŸ”´ å·¨å¤§ |
| **å¯è§†åŒ– Canvas** | âœ… A2UI | âŒ | ğŸ”´ å·¨å¤§ |
| **è¯­éŸ³é€šè¯** | âœ… Twilio/Telnyx/Plivo | âŒ | ğŸ”´ å·¨å¤§ |
| **é•¿æœŸè®°å¿†** | âœ… LanceDB å‘é‡å­˜å‚¨ | âŒ | ğŸŸ¡ ä¸­ç­‰ |
| **Docker æ²™ç®±** | âœ… å®Œæ•´éš”ç¦» | âŒ | ğŸŸ¡ ä¸­ç­‰ |
| **æ’ä»¶ç³»ç»Ÿ** | âœ… æ ‡å‡†åŒ–æ¥å£ | âš ï¸ åŸºç¡€æŠ€èƒ½ | ğŸŸ¡ ä¸­ç­‰ |
| **Hook äº‹ä»¶** | âœ… å®Œæ•´ç”Ÿå‘½å‘¨æœŸ | âŒ | ğŸŸ¡ ä¸­ç­‰ |
| **è¿œç¨‹å®¡æ‰¹** | âœ… å¤šçº§æˆæƒ | âŒ | ğŸŸ¢ å¯é€‰ |
| **ç§»åŠ¨ç«¯åº”ç”¨** | âœ… iOS/Android/macOS | âŒ | ğŸ”´ å·¨å¤§ |
| **éƒ¨ç½²å¤æ‚åº¦** | ğŸ”´ é«˜ (Node 22+) | âœ… **ä½** | âœ… ä¼˜åŠ¿ |
| **å®šæ—¶ä»»åŠ¡** | âš ï¸ åŸºç¡€ cron | âœ… **å®Œå–„** | âœ… ä¼˜åŠ¿ |
| **Trading é›†æˆ** | âŒ | âœ… **Freqtrade** | âœ… ä¼˜åŠ¿ |
| **å­¦ä¹ æ›²çº¿** | ğŸ”´ é™¡å³­ | âœ… **å¹³ç¼“** | âœ… ä¼˜åŠ¿ |
| **ä»£ç å¯è¯»æ€§** | ä¸­ç­‰ (TS å¤æ‚) | âœ… **ç®€æ´** | âœ… ä¼˜åŠ¿ |

### 7.11 æˆ˜ç•¥å®šä½å»ºè®®

åŸºäºå¯¹æ¯”åˆ†æï¼ŒCloudWork åº”é‡‡å–**å·®å¼‚åŒ–å®šä½**è€Œéå…¨é¢è¿½èµ¶ï¼š

**ClawdBot å®šä½**: é€šç”¨å‹ã€ä¼ä¸šçº§ã€å¤šæ¸ é“ AI åŠ©æ‰‹å¹³å°

**CloudWork å»ºè®®å®šä½**: é¢å‘**é‡åŒ–äº¤æ˜“/è¿ç»´ç›‘æ§**çš„è½»é‡çº§ä¸“ä¸šå·¥å…·

**å·®å¼‚åŒ–ä¼˜åŠ¿**:
1. **æç®€éƒ¨ç½²** - 5 åˆ†é’Ÿä¸Šæ‰‹ï¼Œæ—  Node.js/Docker ä¾èµ–
2. **å®šæ—¶ä»»åŠ¡ç³»ç»Ÿ** - ä¸šç•Œé¢†å…ˆçš„ cron + Bot é€šçŸ¥æ¶æ„
3. **Trading æ·±åº¦é›†æˆ** - Freqtrade ç­–ç•¥çƒ­æ›´æ–°ã€å›æµ‹ã€ç›‘æ§
4. **ä»£ç ç®€æ´** - æ˜“äºäºŒæ¬¡å¼€å‘å’Œå®šåˆ¶

**ä¸å»ºè®®è¿½èµ¶çš„æ–¹å‘**:
- å¤šæ¸ é“é€‚é…ï¼ˆæŠ•å…¥äº§å‡ºæ¯”ä½ï¼‰
- Canvas å¯è§†åŒ–ï¼ˆTelegram é™åˆ¶å¤§ï¼‰
- è¯­éŸ³é€šè¯ï¼ˆåœºæ™¯éœ€æ±‚å¼±ï¼‰
- ç§»åŠ¨ç«¯åº”ç”¨ï¼ˆå¼€å‘æˆæœ¬é«˜ï¼‰

---

## å…«ã€Everything Claude Code æ·±åº¦åˆ†æ

> åŸºäºæºç åˆ†æï¼Œè¿™æ˜¯ä¸€ä¸ª Anthropic é»‘å®¢æ¾è·èƒœè€…çš„ç”Ÿäº§çº§é…ç½®é›†åˆï¼Œä¸“æ³¨äºæå‡ Claude Code å¼€å‘æ•ˆç‡

### 8.1 é¡¹ç›®å®šä½

**everything-claude-code** ä¸æ˜¯ Botï¼Œè€Œæ˜¯ Claude Code çš„**æœ€ä½³å®è·µé…ç½®é›†åˆ**ï¼š

- Anthropic é»‘å®¢æ¾è·å¥–é¡¹ç›®
- 10+ ä¸ªæœˆæ—¥å¸¸ä½¿ç”¨æ‰“ç£¨
- ä¸“æ³¨äºå¼€å‘æ•ˆç‡å’Œä»£ç è´¨é‡

```
everything-claude-code/
â”œâ”€â”€ agents/           # ä¸“ä¸šåŒ–å­ä»£ç† (9ä¸ª)
â”œâ”€â”€ skills/           # é¢†åŸŸçŸ¥è¯†æŠ€èƒ½ (11ä¸ªç›®å½•)
â”œâ”€â”€ commands/         # æ–œæ å‘½ä»¤ (16ä¸ª)
â”œâ”€â”€ rules/            # å¼ºåˆ¶æ€§è§„åˆ™
â”œâ”€â”€ hooks/            # äº‹ä»¶è‡ªåŠ¨åŒ–
â”œâ”€â”€ mcp-configs/      # MCP æœåŠ¡å™¨é…ç½®
â”œâ”€â”€ contexts/         # åŠ¨æ€ä¸Šä¸‹æ–‡æ³¨å…¥
â””â”€â”€ scripts/          # è·¨å¹³å°è„šæœ¬
```

### 8.2 ä¸“ä¸šåŒ–å­ä»£ç†ç³»ç»Ÿ

9 ä¸ªä¸“ä¸šåŒ–å­ä»£ç†ï¼Œæ¯ä¸ªæœ‰æ˜ç¡®èŒè´£ï¼š

| ä»£ç† | æ¨¡å‹ | èŒè´£ | å¯ç”¨å·¥å…· |
|------|------|------|----------|
| `planner` | opus | åŠŸèƒ½è§„åˆ’ã€é‡æ„è®¡åˆ’ | Read, Grep, Glob |
| `architect` | opus | ç³»ç»Ÿè®¾è®¡ã€æŠ€æœ¯å†³ç­– | Read, Grep, Glob |
| `code-reviewer` | opus | ä»£ç å®¡æŸ¥ã€å®‰å…¨æ£€æŸ¥ | Read, Grep, Glob, Bash |
| `security-reviewer` | opus | æ¼æ´åˆ†æã€å®‰å…¨å®¡è®¡ | Read, Grep, Glob, Bash |
| `tdd-guide` | opus | æµ‹è¯•é©±åŠ¨å¼€å‘æŒ‡å¯¼ | Read, Grep, Glob, Bash |
| `e2e-runner` | opus | Playwright E2E æµ‹è¯• | Read, Bash |
| `build-error-resolver` | opus | æ„å»ºé”™è¯¯ä¿®å¤ | Read, Grep, Glob, Bash |
| `refactor-cleaner` | opus | æ­»ä»£ç æ¸…ç†ã€é‡æ„ | Read, Grep, Glob, Bash |
| `doc-updater` | opus | æ–‡æ¡£åŒæ­¥æ›´æ–° | Read, Grep, Glob, Write |

**ä»£ç†å…ƒæ•°æ®æ ¼å¼**:
```markdown
---
name: code-reviewer
description: Expert code review specialist...
tools: Read, Grep, Glob, Bash
model: opus
---
```

### 8.3 æŒç»­å­¦ä¹ ç³»ç»Ÿ (æ ¸å¿ƒäº®ç‚¹)

**è‡ªåŠ¨ä»ä¼šè¯ä¸­æå–å¯å¤ç”¨æ¨¡å¼**ï¼š

```
ä¼šè¯æµç¨‹:
SessionStart â†’ åŠ è½½å†å²ä¸Šä¸‹æ–‡å’Œå·²å­¦æŠ€èƒ½
    â†“
ä¼šè¯è¿›è¡Œä¸­ â†’ ç”¨æˆ·å¯éšæ—¶ /learn æ‰‹åŠ¨æå–
    â†“
SessionEnd â†’ è‡ªåŠ¨è¯„ä¼°ä¼šè¯ï¼Œæå–æ¨¡å¼ä¿å­˜ä¸ºæŠ€èƒ½
```

**æŠ€èƒ½æå–é…ç½®** (`continuous-learning/config.json`):
```json
{
  "min_session_length": 10,
  "extraction_threshold": "medium",
  "auto_approve": false,
  "patterns_to_detect": [
    "error_resolution",     // é”™è¯¯è§£å†³æ–¹æ¡ˆ
    "user_corrections",     // ç”¨æˆ·çº æ­£æ¨¡å¼
    "workarounds",          // åº“/æ¡†æ¶å˜é€šæ–¹æ¡ˆ
    "debugging_techniques", // è°ƒè¯•æŠ€å·§
    "project_specific"      // é¡¹ç›®ç‰¹å®šæ¨¡å¼
  ]
}
```

**å­¦ä¹ åˆ°çš„æŠ€èƒ½ä¿å­˜æ ¼å¼**:
```markdown
# [Pattern Name]

**Extracted:** 2026-01-25
**Context:** When dealing with...

## Problem
[What problem this solves]

## Solution
[The pattern/technique]

## Example
[Code example]

## When to Use
[Trigger conditions]
```

### 8.4 Hook äº‹ä»¶è‡ªåŠ¨åŒ–

å®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸé’©å­ï¼š

| é’©å­ç±»å‹ | è§¦å‘æ—¶æœº | ç”¨é€” |
|----------|----------|------|
| `SessionStart` | ä¼šè¯å¼€å§‹ | åŠ è½½ä¸Šä¸‹æ–‡ã€æ£€æµ‹åŒ…ç®¡ç†å™¨ |
| `SessionEnd` | ä¼šè¯ç»“æŸ | æŒä¹…åŒ–çŠ¶æ€ã€è¯„ä¼°æå–æ¨¡å¼ |
| `PreToolUse` | å·¥å…·æ‰§è¡Œå‰ | é˜»æ­¢å±é™©æ“ä½œã€å»ºè®®å‹ç¼© |
| `PostToolUse` | å·¥å…·æ‰§è¡Œå | æ ¼å¼åŒ–ä»£ç ã€ç±»å‹æ£€æŸ¥ã€è­¦å‘Š |
| `PreCompact` | ä¸Šä¸‹æ–‡å‹ç¼©å‰ | ä¿å­˜çŠ¶æ€ |
| `Stop` | å“åº”ç»“æŸ | æ£€æŸ¥ console.log |

**å®ç”¨é’©å­ç¤ºä¾‹**:

```json
// é˜»æ­¢ dev æœåŠ¡å™¨åœ¨é tmux ç¯å¢ƒè¿è¡Œ
{
  "matcher": "tool == \"Bash\" && tool_input.command matches \"npm run dev\"",
  "hooks": [{
    "type": "command",
    "command": "node -e \"console.error('[Hook] BLOCKED: Dev server must run in tmux');\""
  }]
}

// TypeScript ç¼–è¾‘åè‡ªåŠ¨ç±»å‹æ£€æŸ¥
{
  "matcher": "tool == \"Edit\" && tool_input.file_path matches \"\\\\.(ts|tsx)$\"",
  "hooks": [{
    "type": "command",
    "command": "npx tsc --noEmit --pretty false 2>&1 | head -30"
  }]
}

// è­¦å‘Š console.log
{
  "matcher": "tool == \"Edit\" && tool_input.file_path matches \"\\\\.(ts|tsx|js|jsx)$\"",
  "hooks": [{
    "type": "command",
    "command": "grep -n 'console.log' \"$file_path\" && echo '[Hook] Remove console.log'"
  }]
}
```

### 8.5 éªŒè¯å¾ªç¯ç³»ç»Ÿ

å¤šé˜¶æ®µä»£ç éªŒè¯ï¼š

```
Phase 1: Build Verification
   â””â†’ npm run build / pnpm build

Phase 2: Type Check
   â””â†’ npx tsc --noEmit

Phase 3: Lint Check
   â””â†’ npm run lint / ruff check

Phase 4: Test Suite
   â””â†’ npm test --coverage (ç›®æ ‡: 80%+)

Phase 5: Security Scan
   â””â†’ æ£€æŸ¥ç¡¬ç¼–ç å¯†é’¥ã€console.log

Phase 6: Diff Review
   â””â†’ git diff å®¡æŸ¥å˜æ›´
```

**éªŒè¯æŠ¥å‘Šè¾“å‡º**:
```
VERIFICATION REPORT
==================
Build:     [PASS/FAIL]
Types:     [PASS/FAIL] (X errors)
Lint:      [PASS/FAIL] (X warnings)
Tests:     [PASS/FAIL] (X/Y passed, Z% coverage)
Security:  [PASS/FAIL] (X issues)

Overall:   [READY/NOT READY] for PR
```

### 8.6 MCP æœåŠ¡å™¨é›†æˆ

é¢„é…ç½®çš„ MCP æœåŠ¡å™¨ï¼š

```json
{
  "github": "GitHub PRs, issues, repos",
  "supabase": "æ•°æ®åº“æ“ä½œ",
  "vercel": "éƒ¨ç½²å’Œé¡¹ç›®",
  "railway": "Railway éƒ¨ç½²",
  "memory": "è·¨ä¼šè¯æŒä¹…è®°å¿†",
  "sequential-thinking": "æ€ç»´é“¾æ¨ç†",
  "firecrawl": "ç½‘é¡µæŠ“å–",
  "cloudflare-*": "CF æ–‡æ¡£/æ„å»º/æ—¥å¿—",
  "clickhouse": "åˆ†ææŸ¥è¯¢",
  "context7": "å®æ—¶æ–‡æ¡£æŸ¥è¯¢"
}
```

**ä¸Šä¸‹æ–‡ç®¡ç†è­¦å‘Š**:
```
- é…ç½® 20-30 ä¸ª MCP
- æ¯é¡¹ç›®å¯ç”¨ < 10 ä¸ª
- ä¿æŒ < 80 ä¸ªå·¥å…·æ¿€æ´»
- 200k ä¸Šä¸‹æ–‡å¯èƒ½ç¼©å‡åˆ° 70k
```

### 8.7 æ–œæ å‘½ä»¤ç³»ç»Ÿ

16 ä¸ªç”Ÿäº§çº§å‘½ä»¤ï¼š

| å‘½ä»¤ | ç”¨é€” |
|------|------|
| `/plan` | åŠŸèƒ½å®ç°è§„åˆ’ |
| `/tdd` | æµ‹è¯•é©±åŠ¨å¼€å‘ |
| `/code-review` | ä»£ç å®¡æŸ¥ |
| `/e2e` | E2E æµ‹è¯•ç”Ÿæˆ |
| `/build-fix` | ä¿®å¤æ„å»ºé”™è¯¯ |
| `/refactor-clean` | æ­»ä»£ç æ¸…ç† |
| `/learn` | æ‰‹åŠ¨æå–æ¨¡å¼ |
| `/checkpoint` | ä¿å­˜éªŒè¯çŠ¶æ€ |
| `/verify` | è¿è¡ŒéªŒè¯å¾ªç¯ |
| `/orchestrate` | å­ä»£ç†ç¼–æ’ |
| `/update-docs` | æ›´æ–°æ–‡æ¡£ |
| `/test-coverage` | è¦†ç›–ç‡æŠ¥å‘Š |

### 8.8 ä¸ CloudWork å¯¹æ¯”

| åŠŸèƒ½ | everything-claude-code | CloudWork |
|------|------------------------|-----------|
| **å®šä½** | Claude Code é…ç½®é›†åˆ | Telegram Bot |
| **ä¸“ä¸šå­ä»£ç†** | âœ… 9 ä¸ªä¸“ä¸šä»£ç† | âš ï¸ æ— ä¸“ä¸šå­ä»£ç† |
| **æŒç»­å­¦ä¹ ** | âœ… è‡ªåŠ¨æå–æ¨¡å¼ | âŒ |
| **Hook ç³»ç»Ÿ** | âœ… å®Œæ•´ç”Ÿå‘½å‘¨æœŸ | âŒ |
| **éªŒè¯å¾ªç¯** | âœ… 6 é˜¶æ®µéªŒè¯ | âŒ |
| **MCP é›†æˆ** | âœ… 14+ é¢„é…ç½® | âŒ |
| **æ–œæ å‘½ä»¤** | âœ… 16 ä¸ªå‘½ä»¤ | âš ï¸ åŸºç¡€å‘½ä»¤ |
| **è·¨å¹³å°** | âœ… Win/Mac/Linux | âœ… Python è·¨å¹³å° |
| **è¿œç¨‹æ‰§è¡Œ** | âŒ æœ¬åœ° CLI | âœ… **Telegram è¿œç¨‹** |
| **å®šæ—¶ä»»åŠ¡** | âŒ | âœ… **cron + é€šçŸ¥** |
| **Trading é›†æˆ** | âŒ | âœ… **Freqtrade** |

### 8.9 å¯å€Ÿé‰´çš„æ ¸å¿ƒç†å¿µ

#### 8.9.1 ä¸“ä¸šå­ä»£ç†æ¨¡å¼

**CloudWork å¯å®ç°**:
```python
# æŠ€èƒ½ç³»ç»Ÿå¢å¼º
SKILL_AGENTS = {
    "planner": "è§„åˆ’åŠŸèƒ½å®ç°æ­¥éª¤",
    "reviewer": "ä»£ç å®¡æŸ¥å’Œå®‰å…¨æ£€æŸ¥",
    "tdd": "æµ‹è¯•é©±åŠ¨å¼€å‘æŒ‡å¯¼",
}

# ç”¨æˆ·å‘½ä»¤: /skill planner å®ç°ç”¨æˆ·è®¤è¯åŠŸèƒ½
# Bot: è°ƒç”¨ Claude å¹¶æ³¨å…¥ planner ç³»ç»Ÿæç¤º
```

#### 8.9.2 æŒç»­å­¦ä¹ æœºåˆ¶

**CloudWork å¯å®ç°**:
```python
# ä¼šè¯ç»“æŸæ—¶è¯„ä¼°
async def on_session_end(session_id):
    if session.message_count >= 10:
        # æç¤º Claude è¯„ä¼°ä¼šè¯
        prompt = "è¯„ä¼°æœ¬æ¬¡ä¼šè¯ï¼Œæå–å¯å¤ç”¨çš„æ¨¡å¼ä¿å­˜ä¸ºæŠ€èƒ½"
        await claude_executor.execute(prompt, session_id)
```

#### 8.9.3 Hook è‡ªåŠ¨åŒ–

**CloudWork å¯å®ç°çš„ Hook**:
```python
# ä»£ç ä¿®æ”¹åè‡ªåŠ¨æ£€æŸ¥
POST_EDIT_HOOKS = [
    {"pattern": r"\.(py)$", "check": "ruff check {file}"},
    {"pattern": r"\.(ts|tsx)$", "check": "npx tsc --noEmit"},
]

# å±é™©å‘½ä»¤é¢„è­¦
PRE_BASH_HOOKS = [
    {"pattern": r"rm -rf", "warn": "å±é™©æ“ä½œï¼Œéœ€ç¡®è®¤"},
    {"pattern": r"git push --force", "warn": "å¼ºåˆ¶æ¨é€ï¼Œéœ€ç¡®è®¤"},
]
```

#### 8.9.4 éªŒè¯å¾ªç¯

**CloudWork /verify å‘½ä»¤å®ç°**:
```python
async def verify_command(update, context):
    """è¿è¡ŒéªŒè¯å¾ªç¯"""
    checks = [
        ("Build", "npm run build"),
        ("Type", "npx tsc --noEmit"),
        ("Lint", "npm run lint"),
        ("Test", "npm test"),
    ]
    results = []
    for name, cmd in checks:
        result = await run_bash(cmd)
        status = "âœ…" if result.returncode == 0 else "âŒ"
        results.append(f"{status} {name}")

    await update.message.reply_text("\n".join(results))
```

### 8.10 å®æ–½ä¼˜å…ˆçº§å»ºè®®

| åŠŸèƒ½ | ä¼˜å…ˆçº§ | å¤æ‚åº¦ | ä»·å€¼ |
|------|--------|--------|------|
| ä¸“ä¸šå­ä»£ç† (planner/reviewer) | ğŸ”´ é«˜ | ä½ | é«˜ |
| /verify éªŒè¯å‘½ä»¤ | ğŸ”´ é«˜ | ä½ | é«˜ |
| Hook è‡ªåŠ¨æ£€æŸ¥ | ğŸŸ¡ ä¸­ | ä¸­ | ä¸­ |
| æŒç»­å­¦ä¹ ç³»ç»Ÿ | ğŸŸ¡ ä¸­ | é«˜ | é«˜ |
| MCP æœåŠ¡å™¨é›†æˆ | ğŸŸ¢ ä½ | é«˜ | ä¸­ |

**ç«‹å³å¯å®ç°** (1-2 å¤©):
1. æ·»åŠ  `/plan` å‘½ä»¤è°ƒç”¨ planner å­ä»£ç†
2. æ·»åŠ  `/review` å‘½ä»¤è°ƒç”¨ code-reviewer å­ä»£ç†
3. æ·»åŠ  `/verify` å‘½ä»¤è¿è¡ŒåŸºç¡€éªŒè¯

**ä¸­æœŸå®ç°** (1-2 å‘¨):
1. ä»£ç ä¿®æ”¹åè‡ªåŠ¨ lint/type æ£€æŸ¥
2. å±é™©å‘½ä»¤é¢„è­¦æœºåˆ¶
3. ä¼šè¯æ¨¡å¼æå–å»ºè®®

---

## ä¹ã€ä¸‰é¡¹ç›®ç»¼åˆå¯¹æ¯”æ€»ç»“

### 9.1 å®šä½å¯¹æ¯”

| é¡¹ç›® | å®šä½ | æ ¸å¿ƒä»·å€¼ |
|------|------|----------|
| **ClawdBot** | ä¼ä¸šçº§å¤šæ¸ é“ AI åŠ©æ‰‹ | 12+ æ¸ é“ã€Canvasã€è¯­éŸ³é€šè¯ |
| **everything-claude-code** | Claude Code æœ€ä½³å®è·µ | å­ä»£ç†ã€æŒç»­å­¦ä¹ ã€éªŒè¯å¾ªç¯ |
| **CloudWork** | è½»é‡çº§è¿œç¨‹å¼€å‘ Bot | å®šæ—¶ä»»åŠ¡ã€Trading é›†æˆã€æç®€éƒ¨ç½² |

### 9.2 CloudWork å·®å¼‚åŒ–è·¯çº¿

åŸºäºä¸‰é¡¹ç›®å¯¹æ¯”ï¼ŒCloudWork åº”èšç„¦ï¼š

**æ ¸å¿ƒä¼˜åŠ¿å¼ºåŒ–**:
1. âœ… å®šæ—¶ä»»åŠ¡ç³»ç»Ÿ - ç‹¬ç‰¹ç«äº‰åŠ›
2. âœ… Trading/Freqtrade é›†æˆ - å‚ç›´åœºæ™¯
3. âœ… æç®€éƒ¨ç½² - 5 åˆ†é’Ÿä¸Šæ‰‹

**å€Ÿé‰´å®æ–½**:
1. ğŸ”„ ä» everything-claude-code å€Ÿé‰´å­ä»£ç†æ¨¡å¼
2. ğŸ”„ ä» everything-claude-code å€Ÿé‰´éªŒè¯å¾ªç¯
3. ğŸ”„ ä» ClawdBot å€Ÿé‰´æ¶ˆæ¯èŠ‚æµæŠ€æœ¯

**ä¸è¿½èµ¶**:
- âŒ å¤šæ¸ é“ (ClawdBot æ–¹å‘)
- âŒ Canvas/å¯è§†åŒ– (ClawdBot æ–¹å‘)
- âŒ å®Œæ•´ Hook ç³»ç»Ÿ (everything-claude-code æœ¬åœ°æ–¹å‘)

### 9.3 æœ€ç»ˆå»ºè®®å®šä½

**CloudWork = è¿œç¨‹å¼€å‘ + é‡åŒ–äº¤æ˜“ + è¿ç»´ç›‘æ§**

```
ä¸“ä¸šåŒ–æ–¹å‘:
â”œâ”€â”€ Trading Bot å¼€å‘ (Freqtrade ç­–ç•¥)
â”œâ”€â”€ æœåŠ¡å™¨è¿ç»´è‡ªåŠ¨åŒ– (cron + å‘Šè­¦)
â”œâ”€â”€ è¿œç¨‹ä»£ç å®¡æŸ¥ (å€Ÿé‰´ everything-claude-code)
â””â”€â”€ è½»é‡çº§ CI/CD è§¦å‘ (éªŒè¯å¾ªç¯)
```

---

## åã€WorkAny æ·±åº¦åˆ†æ

> WorkAny æ˜¯ä¸€ä¸ªæ¡Œé¢ AI Agent åº”ç”¨ï¼Œæ ¸å¿ƒä»·å€¼åœ¨äº**æ¡Œé¢ç«¯å‰ç«¯ä½“éªŒ**ï¼Œæä¾›ä¸°å¯Œçš„å¯è§†åŒ–äº¤äº’

### 10.1 é¡¹ç›®å®šä½

**WorkAny** çš„æ ¸å¿ƒä»·å€¼æ˜¯**æ¡Œé¢å‰ç«¯ä½“éªŒ**ï¼Œè€Œéåç«¯æ¶æ„ï¼š

- **æŠ€æœ¯æ ˆ**: Tauri (Rust) + React + Hono + Claude Agent SDK
- **å®šä½**: æ¡Œé¢ç«¯ AI ç¼–ç¨‹åŠ©æ‰‹ï¼Œç±»ä¼¼ Claude Desktop
- **æ ¸å¿ƒä»·å€¼**: **å¯è§†åŒ–äº¤äº’** - Plan å®¡æ‰¹ UIã€Artifact å®æ—¶é¢„è§ˆã€Live Preview

âš ï¸ **å¯¹ CloudWork (Telegram Bot) çš„å€Ÿé‰´ä»·å€¼æœ‰é™**ï¼š
- WorkAny çš„ä¸»è¦ä¼˜åŠ¿æ˜¯æ¡Œé¢ GUI ä½“éªŒ
- Telegram Bot å—é™äºçº¯æ–‡æœ¬ + æŒ‰é’®äº¤äº’
- åç«¯æ¶æ„ï¼ˆClaude Agent SDKï¼‰CloudWork å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œæ— éœ€å€Ÿé‰´

```
workany/
â”œâ”€â”€ src/              # å‰ç«¯ (React 19 + TypeScript + Vite)
â”œâ”€â”€ src-api/          # åç«¯ API (Hono + Claude Agent SDK)
â””â”€â”€ src-tauri/        # æ¡Œé¢åº”ç”¨ (Tauri 2 + Rust + SQLite)
```

### 10.2 æ ¸å¿ƒæ¶æ„

#### 10.2.1 ä¸‰å±‚æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Tauri Desktop App                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  React Frontend (Vite + Tailwind CSS 4)             â”‚   â”‚
â”‚  â”‚  - ä»»åŠ¡è¾“å…¥ / ä¼šè¯ç®¡ç†                                â”‚   â”‚
â”‚  â”‚  - Plan å®¡æ‰¹ç•Œé¢                                     â”‚   â”‚
â”‚  â”‚  - Artifact é¢„è§ˆ (HTML/Excel/PPT/PDF/Audio/Video)   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                            â”‚ HTTP                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Hono API Server (Node.js)                          â”‚   â”‚
â”‚  â”‚  - Agent ä¼šè¯ç®¡ç†                                    â”‚   â”‚
â”‚  â”‚  - Provider Manager (Sandbox/Agent åˆ‡æ¢)            â”‚   â”‚
â”‚  â”‚  - MCP Server åŠ è½½                                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                            â”‚ Claude Agent SDK               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Sandbox Providers                                   â”‚   â”‚
â”‚  â”‚  - Codex CLI Sandbox (è¿›ç¨‹éš”ç¦»)                      â”‚   â”‚
â”‚  â”‚  - Native Provider (æœ¬æœºæ‰§è¡Œ)                        â”‚   â”‚
â”‚  â”‚  - Claude Sandbox (å®¹å™¨éš”ç¦») [å¯é€‰]                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 10.2.2 Agent åŒæ¨¡å¼æ‰§è¡Œ

**ç›´æ¥æ‰§è¡Œæ¨¡å¼** (`run`):
```typescript
// ç®€å•ä»»åŠ¡ç›´æ¥æ‰§è¡Œï¼Œæ— éœ€è§„åˆ’
async *run(prompt, options): AsyncGenerator<AgentMessage> {
  // æ³¨å…¥å·¥ä½œåŒºæŒ‡ä»¤
  const enhancedPrompt = getWorkspaceInstruction(workDir) + prompt;

  // è°ƒç”¨ Claude Agent SDK
  for await (const message of query({ prompt, options })) {
    yield* this.processMessage(message);
  }
}
```

**è§„åˆ’-æ‰§è¡Œæ¨¡å¼** (`plan` â†’ `execute`):
```typescript
// Phase 1: è§„åˆ’é˜¶æ®µ (æ— å·¥å…·æƒé™)
async *plan(prompt, options): AsyncGenerator<AgentMessage> {
  const planningPrompt = PLANNING_INSTRUCTION + prompt;

  // è¿”å› Plan æˆ– DirectAnswer
  const response = await query({ prompt: planningPrompt, allowedTools: [] });
  const planningResult = parsePlanningResponse(response);

  if (planningResult.type === 'direct_answer') {
    yield { type: 'direct_answer', content: planningResult.answer };
  } else {
    yield { type: 'plan', plan: planningResult.plan };
    // ç­‰å¾…ç”¨æˆ·å®¡æ‰¹...
  }
}

// Phase 2: æ‰§è¡Œé˜¶æ®µ (è·å¾—ç”¨æˆ·å®¡æ‰¹å)
async *execute(options): AsyncGenerator<AgentMessage> {
  const plan = this.getPlan(options.planId);
  const executionPrompt = formatPlanForExecution(plan);

  // æœ‰å®Œæ•´å·¥å…·æƒé™æ‰§è¡Œ
  for await (const message of query({ prompt: executionPrompt })) {
    yield* this.processMessage(message);
  }
}
```

### 10.3 æ™ºèƒ½æ„å›¾æ£€æµ‹

**æ ¸å¿ƒäº®ç‚¹**: è‡ªåŠ¨åŒºåˆ†ç®€å•é—®ç­”å’Œå¤æ‚ä»»åŠ¡

```typescript
// PLANNING_INSTRUCTION æ¨¡æ¿
const PLANNING_INSTRUCTION = `
## INTENT DETECTION

**SIMPLE QUESTIONS (answer directly, NO planning needed):**
- Greetings: "hello", "hi", "who are you"
- Identity questions: "who are u", "ä½ æ˜¯è°"
- General knowledge questions
- Conversations or chitchat

**COMPLEX TASKS (require planning):**
- File operations: create, read, modify, delete
- Code writing or modification
- Document/presentation creation
- Multi-step tasks that need tools

## OUTPUT FORMAT

For SIMPLE QUESTIONS:
{"type": "direct_answer", "answer": "Your response"}

For COMPLEX TASKS:
{"type": "plan", "goal": "...", "steps": [...], "notes": "..."}
`;
```

**CloudWork å€Ÿé‰´ä»·å€¼**: â­â­â­â­

å½“å‰ CloudWork æ‰€æœ‰æ¶ˆæ¯éƒ½ç›´æ¥æ‰§è¡Œ Claude CLIï¼Œå¯ä»¥å¢åŠ æ„å›¾æ£€æµ‹ï¼š
- ç®€å•é—®ç­”æ— éœ€å¯åŠ¨å®Œæ•´ CLI ä¼šè¯
- å¤æ‚ä»»åŠ¡å¯ä»¥å…ˆè¾“å‡ºè®¡åˆ’è®©ç”¨æˆ·ç¡®è®¤

### 10.4 å¼ºåˆ¶å¤‡ä»½æœºåˆ¶

**æ ¸å¿ƒäº®ç‚¹**: ç ´åæ€§æ“ä½œå¼ºåˆ¶å¤‡ä»½

```typescript
// PLANNING_INSTRUCTION ä¸­çš„å¼ºåˆ¶è§„åˆ™
`
## âš ï¸ CRITICAL: MANDATORY BACKUP FOR DESTRUCTIVE OPERATIONS

Any task involving MODIFYING, DELETING, MOVING, or RENAMING files
MUST include a BACKUP step FIRST in the plan!

**Destructive operations include:**
- Deleting files or folders (rm, delete, åˆ é™¤, æ¸…ç©º)
- Modifying/editing existing files
- Moving files (mv, move, ç§»åŠ¨)
- Renaming files

**For ANY destructive operation, your plan MUST:**
1. FIRST step: Backup affected files to workspace/backup/
2. THEN proceed with the actual operation

Example - User asks "æ¸…ç©ºæ¡Œé¢" (clear desktop):
{
  "type": "plan",
  "goal": "æ¸…ç©ºæ¡Œé¢",
  "steps": [
    {"id": "1", "description": "æŸ¥çœ‹æ¡Œé¢æ–‡ä»¶åˆ—è¡¨"},
    {"id": "2", "description": "å¤‡ä»½æ¡Œé¢æ–‡ä»¶åˆ°å·¥ä½œåŒºbackupç›®å½•"},
    {"id": "3", "description": "åˆ é™¤æ¡Œé¢æ‰€æœ‰é¡¹ç›®"}
  ]
}
`
```

**CloudWork å€Ÿé‰´ä»·å€¼**: â­â­â­â­â­

è¿™æ˜¯éå¸¸å®ç”¨çš„å®‰å…¨æœºåˆ¶ï¼Œå¯ä»¥ç›´æ¥é›†æˆåˆ° CloudWork çš„ç³»ç»Ÿæç¤ºä¸­ã€‚

### 10.5 æ²™ç®±æ‰§è¡Œç³»ç»Ÿ

#### 10.5.1 Provider æ¶æ„

```typescript
// å¯æ’æ‹”çš„ Provider ç³»ç»Ÿ
class ProviderManagerImpl {
  private registries: Map<string, Registry> = new Map();

  // åŠ¨æ€åˆ‡æ¢ Sandbox Provider
  async switchSandboxProvider(type: string, config?: any) {
    const current = this.activeProviders.get('sandbox');
    if (current) await current.shutdown();

    const provider = await registry.getInstance(type, config);
    this.activeProviders.set('sandbox', provider);
  }
}

// æ”¯æŒçš„ Provider
| Provider | éš”ç¦»çº§åˆ« | ç‰¹ç‚¹ |
|----------|----------|------|
| Codex    | è¿›ç¨‹éš”ç¦» | ä½¿ç”¨ OpenAI Codex sandbox |
| Native   | æ— éš”ç¦»   | æœ¬æœºç›´æ¥æ‰§è¡Œ |
| Claude   | å®¹å™¨éš”ç¦» | Docker å®¹å™¨ |
```

#### 10.5.2 Codex Sandbox é›†æˆ

```typescript
// ä½¿ç”¨ OpenAI Codex CLI çš„ sandbox åŠŸèƒ½
class CodexProvider implements ISandboxProvider {
  async runScript(filePath, workDir, options): Promise<SandboxExecResult> {
    const os = platform();
    const sandboxSubcommand = os === 'darwin' ? 'macos' : 'linux';

    // Codex sandbox æä¾›è¿›ç¨‹çº§éš”ç¦»
    const proc = spawn(this.codexPath, [
      'sandbox', sandboxSubcommand,
      '--full-auto',  // å…è®¸è¯»å†™å·¥ä½œç›®å½•
      '--',
      runtime, ...args
    ], { cwd: workDir });

    return { stdout, stderr, exitCode };
  }

  getCapabilities(): SandboxCapabilities {
    return {
      isolation: 'process',  // è¿›ç¨‹éš”ç¦»
      supportsNetworking: false,  // ç½‘ç»œè¢«é˜»æ–­
      supportedRuntimes: ['node', 'python', 'bun'],
    };
  }
}
```

**CloudWork å€Ÿé‰´ä»·å€¼**: â­â­â­

å½“å‰ CloudWork ç›´æ¥åœ¨ä¸»æœºæ‰§è¡Œæ‰€æœ‰å‘½ä»¤ï¼Œå¯è€ƒè™‘é›†æˆ Codex sandbox æä¾›å¯é€‰çš„æ²™ç®±æ¨¡å¼ã€‚

### 10.6 ä¸°å¯Œçš„ Artifact é¢„è§ˆ

**æ”¯æŒçš„é¢„è§ˆç±»å‹**:

| ç±»å‹ | ç»„ä»¶ | åŠŸèƒ½ |
|------|------|------|
| HTML | `ArtifactPreview` | iframe é™æ€é¢„è§ˆ + Vite å®æ—¶é¢„è§ˆ |
| Code | `CodePreview` | è¯­æ³•é«˜äº® + è¡Œå· |
| Excel | `ExcelPreview` | è¡¨æ ¼æ¸²æŸ“ |
| PPTX | `PptxPreview` | å¹»ç¯ç‰‡é¢„è§ˆ + ç¼©ç•¥å›¾å¯¼èˆª |
| DOCX | `DocxPreview` | Word æ–‡æ¡£é¢„è§ˆ |
| PDF | `PdfPreview` | PDF æ¸²æŸ“ |
| Image | `ImagePreview` | å›¾ç‰‡é¢„è§ˆ |
| Audio | `AudioPreview` | éŸ³é¢‘æ’­æ”¾å™¨ |
| Video | `VideoPreview` | è§†é¢‘æ’­æ”¾å™¨ |
| Font | `FontPreview` | å­—ä½“é¢„è§ˆ |
| Markdown | ReactMarkdown | Markdown æ¸²æŸ“ + YAML frontmatter |
| CSV | è¡¨æ ¼ | CSV æ•°æ®è¡¨æ ¼ |
| WebSearch | `WebSearchPreview` | æœç´¢ç»“æœå±•ç¤º |

**Live Preview åŠŸèƒ½**:
```typescript
// Vite å®æ—¶é¢„è§ˆ (éœ€è¦ Node.js)
const canUseLivePreview = useMemo(() => {
  return artifact.type === 'html' && isNodeAvailable;
}, [artifact, isNodeAvailable]);

// é™æ€é¢„è§ˆ vs å®æ—¶é¢„è§ˆåˆ‡æ¢
<VitePreview
  previewUrl={livePreviewUrl}
  status={livePreviewStatus}
  onStart={onStartLivePreview}
/>
```

**CloudWork å€Ÿé‰´ä»·å€¼**: â­â­

Telegram Bot é™åˆ¶è¾ƒå¤§ï¼Œä½†å¯ä»¥è€ƒè™‘ï¼š
- å°†ç”Ÿæˆçš„ HTML ä¸Šä¼ åˆ°ä¸´æ—¶æœåŠ¡å™¨æä¾›é¢„è§ˆé“¾æ¥
- ä½¿ç”¨ Telegram Mini App å®ç°ä¸°å¯Œé¢„è§ˆ

### 10.7 Plan å®¡æ‰¹ UI

```tsx
// PlanApproval.tsx
export function PlanApproval({ plan, isWaitingApproval, onApprove, onReject }) {
  return (
    <div className="space-y-4 rounded-xl border p-4">
      {/* ç›®æ ‡ */}
      <div>
        <p className="text-xs">ç›®æ ‡</p>
        <p className="text-sm">{plan.goal}</p>
      </div>

      {/* æ­¥éª¤åˆ—è¡¨ (å¸¦çŠ¶æ€æŒ‡ç¤º) */}
      <div className="space-y-2">
        {plan.steps.map((step, index) => (
          <div key={step.id} className="flex items-start gap-2.5">
            <StepIndicator status={step.status} index={index} />
            <span>{step.description}</span>
          </div>
        ))}
      </div>

      {/* å®¡æ‰¹æŒ‰é’® */}
      {isWaitingApproval && (
        <div className="flex gap-2">
          <Button onClick={onReject}>å–æ¶ˆ</Button>
          <Button onClick={onApprove}>å¼€å§‹æ‰§è¡Œ</Button>
        </div>
      )}
    </div>
  );
}
```

**CloudWork å€Ÿé‰´ä»·å€¼**: â­â­â­â­

å¯ä»¥åœ¨ Telegram ä¸­å®ç°ç±»ä¼¼åŠŸèƒ½ï¼š
```
ğŸ“‹ æ‰§è¡Œè®¡åˆ’:

ç›®æ ‡: æ¸…ç©ºæ¡Œé¢

æ­¥éª¤:
1ï¸âƒ£ æŸ¥çœ‹æ¡Œé¢æ–‡ä»¶åˆ—è¡¨
2ï¸âƒ£ å¤‡ä»½æ–‡ä»¶åˆ°å·¥ä½œåŒº
3ï¸âƒ£ åˆ é™¤æ¡Œé¢æ–‡ä»¶

[âœ… æ‰§è¡Œ] [âŒ å–æ¶ˆ]
```

### 10.8 å·¥ä½œåŒºå¼ºåˆ¶ç›®å½•

**æ ¸å¿ƒäº®ç‚¹**: æ‰€æœ‰è¾“å‡ºå¼ºåˆ¶ä¿å­˜åˆ°ä¼šè¯ç›®å½•

```typescript
// getWorkspaceInstruction() ç”Ÿæˆçš„æŒ‡ä»¤
`
## CRITICAL: Workspace Configuration
**MANDATORY OUTPUT DIRECTORY: ${workDir}**

ALL files you create MUST be saved to this directory.

Rules:
1. ALWAYS use absolute paths starting with ${workDir}/
2. NEVER use ~/Documents/, /tmp/, or default paths
3. Scripts MUST define OUTPUT_DIR = "${workDir}"

Python script example:
\`\`\`python
OUTPUT_DIR = "${workDir}"
os.makedirs(OUTPUT_DIR, exist_ok=True)
output_file = os.path.join(OUTPUT_DIR, "results.json")
\`\`\`
`
```

**CloudWork å€Ÿé‰´ä»·å€¼**: â­â­â­â­

å½“å‰ CloudWork æ²¡æœ‰å¼ºåˆ¶å·¥ä½œç›®å½•ï¼Œæ–‡ä»¶å¯èƒ½æ•£è½å„å¤„ã€‚å¯ä»¥ï¼š
1. ä¸ºæ¯ä¸ªä¼šè¯åˆ›å»ºä¸“ç”¨ç›®å½• `/workspace/sessions/{session_id}/`
2. æ³¨å…¥ç±»ä¼¼çš„å·¥ä½œåŒºæŒ‡ä»¤

### 10.9 å¤š Provider æ”¯æŒ

```typescript
// æ”¯æŒå¤šä¸ªæ¨¡å‹æä¾›å•†
const providers = [
  'OpenRouter',   // å¤šæ¨¡å‹èšåˆ
  'Anthropic',    // å®˜æ–¹ Claude API
  'OpenAI',       // GPT ç³»åˆ—
  'Custom',       // è‡ªå®šä¹‰ç«¯ç‚¹
];

// åŠ¨æ€åˆ‡æ¢
async function buildEnvConfig() {
  if (this.config.apiKey) {
    env.ANTHROPIC_AUTH_TOKEN = this.config.apiKey;
    env.ANTHROPIC_BASE_URL = this.config.baseUrl;
  }
  if (this.config.model) {
    env.ANTHROPIC_MODEL = this.config.model;
  }
}
```

**CloudWork å€Ÿé‰´ä»·å€¼**: â­â­â­

CloudWork å·²æ”¯æŒè‡ªå®šä¹‰ API ç«¯ç‚¹ï¼Œä½†å¯ä»¥å¢åŠ æ›´æ¸…æ™°çš„ Provider åˆ‡æ¢ç•Œé¢ã€‚

### 10.10 ä¸ CloudWork å¯¹æ¯”

| åŠŸèƒ½ | WorkAny | CloudWork |
|------|---------|-----------|
| **å¹³å°** | æ¡Œé¢åº”ç”¨ (Tauri) | Telegram Bot |
| **Plan-Execute æ¨¡å¼** | âœ… å®Œæ•´åŒé˜¶æ®µ | âŒ ç›´æ¥æ‰§è¡Œ |
| **æ„å›¾æ£€æµ‹** | âœ… ç®€å•é—®ç­”/å¤æ‚ä»»åŠ¡ | âŒ |
| **å¼ºåˆ¶å¤‡ä»½** | âœ… ç ´åæ€§æ“ä½œå¿…é¡»å¤‡ä»½ | âŒ |
| **æ²™ç®±æ‰§è¡Œ** | âœ… Codex/Native/Claude | âŒ ä¸»æœºç›´æ¥æ‰§è¡Œ |
| **Artifact é¢„è§ˆ** | âœ… 13+ ç±»å‹ | âŒ çº¯æ–‡æœ¬ |
| **å·¥ä½œåŒºéš”ç¦»** | âœ… ä¼šè¯çº§ç›®å½• | âš ï¸ é¡¹ç›®çº§ |
| **MCP é›†æˆ** | âœ… ç”¨æˆ·å¯é…ç½® | âŒ |
| **è¿œç¨‹è®¿é—®** | âŒ æœ¬åœ°åº”ç”¨ | âœ… **Telegram éšå¤„å¯ç”¨** |
| **å®šæ—¶ä»»åŠ¡** | âŒ | âœ… **cron + é€šçŸ¥** |
| **Trading é›†æˆ** | âŒ | âœ… **Freqtrade** |
| **éƒ¨ç½²å¤æ‚åº¦** | ğŸ”´ Tauri ç¼–è¯‘ | âœ… **pip install** |

### 10.11 å¯å€Ÿé‰´çš„æ ¸å¿ƒåŠŸèƒ½

#### 10.11.1 Plan-Execute æ¨¡å¼ (é«˜ä¼˜å…ˆçº§)

**CloudWork å®ç°æ–¹æ¡ˆ**:
```python
# æ–°å¢ /plan å‘½ä»¤
async def plan_command(update, context):
    prompt = ' '.join(context.args)

    # è°ƒç”¨ Claude ç”Ÿæˆè®¡åˆ’ (æ— å·¥å…·æƒé™)
    plan = await claude_executor.plan(prompt)

    # å±•ç¤ºè®¡åˆ’å¹¶ç­‰å¾…ç¡®è®¤
    msg = f"""ğŸ“‹ æ‰§è¡Œè®¡åˆ’:

ç›®æ ‡: {plan['goal']}

æ­¥éª¤:
{format_steps(plan['steps'])}
"""
    keyboard = [
        [InlineKeyboardButton("âœ… æ‰§è¡Œ", callback_data=f"exec_plan:{plan_id}"),
         InlineKeyboardButton("âŒ å–æ¶ˆ", callback_data=f"cancel_plan:{plan_id}")]
    ]
    await update.message.reply_text(msg, reply_markup=InlineKeyboardMarkup(keyboard))
```

#### 10.11.2 å¼ºåˆ¶å¤‡ä»½æŒ‡ä»¤ (é«˜ä¼˜å…ˆçº§)

**CloudWork å®ç°æ–¹æ¡ˆ**:
```python
# æ·»åŠ åˆ°ç³»ç»Ÿæç¤º
BACKUP_INSTRUCTION = """
âš ï¸ ç ´åæ€§æ“ä½œå¿…é¡»å…ˆå¤‡ä»½:
- åˆ é™¤æ–‡ä»¶å‰: cp file /workspace/backup/
- ä¿®æ”¹æ–‡ä»¶å‰: cp file file.bak
- æ¸…ç©ºç›®å½•å‰: cp -r dir /workspace/backup/
"""

# æ³¨å…¥åˆ°æ¯æ¬¡æ‰§è¡Œ
system_prompt = BACKUP_INSTRUCTION + user_prompt
```

#### 10.11.3 æ„å›¾æ£€æµ‹ (ä¸­ä¼˜å…ˆçº§)

**CloudWork å®ç°æ–¹æ¡ˆ**:
```python
# ç®€å•æ„å›¾æ£€æµ‹
SIMPLE_PATTERNS = [
    r"^(hi|hello|ä½ å¥½|hey)",
    r"^(who|what|how|when|where|why)\s",
    r"ä½ æ˜¯è°",
    r"å¸®æˆ‘.*ä»€ä¹ˆ",
]

async def handle_message(update, context):
    text = update.message.text

    # æ£€æµ‹ç®€å•é—®ç­”
    if any(re.match(p, text, re.I) for p in SIMPLE_PATTERNS):
        # ç›´æ¥å›å¤ï¼Œæ— éœ€å®Œæ•´ CLI
        response = await quick_answer(text)
        await update.message.reply_text(response)
        return

    # å¤æ‚ä»»åŠ¡èµ°å®Œæ•´æµç¨‹
    await start_claude_session(update, text)
```

#### 10.11.4 å·¥ä½œåŒºç›®å½•éš”ç¦» (ä¸­ä¼˜å…ˆçº§)

**CloudWork å®ç°æ–¹æ¡ˆ**:
```python
# ä¼šè¯çº§å·¥ä½œç›®å½•
def get_session_workdir(user_id, session_id):
    base = Path.home() / "cloudwork" / "sessions"
    session_dir = base / f"{user_id}" / session_id
    session_dir.mkdir(parents=True, exist_ok=True)
    return session_dir

# æ³¨å…¥åˆ°æç¤º
workspace_instruction = f"""
æ‰€æœ‰æ–‡ä»¶å¿…é¡»ä¿å­˜åˆ°: {session_dir}
ä¸è¦ä½¿ç”¨ ~/Documents æˆ– /tmp
"""
```

### 10.12 å¯¹ CloudWork çš„å®é™…å€Ÿé‰´ä»·å€¼

**ç»“è®º**: WorkAny å¯¹ CloudWork çš„å€Ÿé‰´ä»·å€¼**æœ‰é™**

| åŠŸèƒ½ | WorkAny å®ç° | CloudWork å¯è¡Œæ€§ | å€Ÿé‰´ä»·å€¼ |
|------|--------------|------------------|----------|
| Plan å®¡æ‰¹ UI | âœ… ç²¾ç¾ React ç»„ä»¶ | âš ï¸ åªèƒ½ç”¨æŒ‰é’®+æ–‡æœ¬ | ğŸŸ¡ ä½ |
| Artifact é¢„è§ˆ | âœ… 13+ ç±»å‹å®æ—¶é¢„è§ˆ | âŒ Telegram æ— æ³•å®ç° | ğŸ”´ æ—  |
| Live Preview | âœ… Vite çƒ­æ›´æ–° | âŒ éœ€è¦ Web æœåŠ¡ | ğŸ”´ æ—  |
| æ„å›¾æ£€æµ‹ | âœ… ç®€å•é—®ç­”åˆ†æµ | âœ… å¯ç›´æ¥å®ç° | ğŸŸ¢ é«˜ |
| å¼ºåˆ¶å¤‡ä»½ | âœ… ç³»ç»Ÿæç¤ºæ³¨å…¥ | âœ… å¯ç›´æ¥å¤åˆ¶ | ğŸŸ¢ é«˜ |
| å·¥ä½œåŒºéš”ç¦» | âœ… ä¼šè¯çº§ç›®å½• | âœ… å¯ç›´æ¥å®ç° | ğŸŸ¢ é«˜ |

**çœŸæ­£å¯å€Ÿé‰´çš„åªæœ‰ 3 ç‚¹**:
1. âœ… å¼ºåˆ¶å¤‡ä»½æŒ‡ä»¤ - ç›´æ¥å¤åˆ¶åˆ° CloudWork ç³»ç»Ÿæç¤º
2. âœ… æ„å›¾æ£€æµ‹ - ç®€å•é—®ç­”æ— éœ€å®Œæ•´ CLI
3. âœ… å·¥ä½œåŒºéš”ç¦» - ä¼šè¯çº§ç›®å½•ç®¡ç†

**æ¡Œé¢å‰ç«¯ä»·å€¼æ— æ³•å€Ÿé‰´**:
- Plan å®¡æ‰¹çš„ç²¾ç¾ UI â†’ Telegram åªæœ‰æŒ‰é’®
- Artifact å®æ—¶é¢„è§ˆ â†’ éœ€è¦æµè§ˆå™¨ç¯å¢ƒ
- Live Preview â†’ éœ€è¦æœ¬åœ° Node.js æœåŠ¡

---

## åä¸€ã€å››é¡¹ç›®ç»¼åˆå¯¹æ¯”

### 11.1 å®šä½çŸ©é˜µ

| é¡¹ç›® | ç±»å‹ | æ ¸å¿ƒä»·å€¼ | å¯¹ CloudWork å€Ÿé‰´ä»·å€¼ |
|------|------|----------|----------------------|
| **ClawdBot** | ä¼ä¸šçº§å¤šæ¸ é“ Bot | æ¶ˆæ¯å¤„ç†ã€æµå¼æŠ€æœ¯ | ğŸŸ¢ **é«˜** - æ¶ˆæ¯èŠ‚æµã€åˆ†å— |
| **everything-claude-code** | Claude Code é…ç½®é›† | å­ä»£ç†ã€éªŒè¯å¾ªç¯ | ğŸŸ¢ **é«˜** - ç›´æ¥å¯ç”¨ |
| **WorkAny** | æ¡Œé¢ AI Agent | **æ¡Œé¢ GUI ä½“éªŒ** | ğŸ”´ **ä½** - å‰ç«¯æ— æ³•å¤ç”¨ |
| **CloudWork** | è½»é‡è¿œç¨‹ Bot | è¿œç¨‹è®¿é—®ã€å®šæ—¶ä»»åŠ¡ | - |

### 11.2 åŠŸèƒ½å¯¹æ¯”æ€»è¡¨

| åŠŸèƒ½ | ClawdBot | everything-cc | WorkAny | CloudWork |
|------|----------|---------------|---------|-----------|
| **è¿œç¨‹è®¿é—®** | âœ… 12+ æ¸ é“ | âŒ æœ¬åœ° | âŒ æœ¬åœ° | âœ… Telegram |
| **Plan-Execute** | âš ï¸ åŸºç¡€ | âŒ | âœ… å®Œæ•´ | âŒ â†’ å¯å®ç° |
| **æ„å›¾æ£€æµ‹** | âŒ | âŒ | âœ… | âŒ â†’ å¯å®ç° |
| **å¼ºåˆ¶å¤‡ä»½** | âŒ | âŒ | âœ… | âŒ â†’ å¯å®ç° |
| **æ²™ç®±éš”ç¦»** | âœ… Docker | âŒ | âœ… Codex | âŒ |
| **å­ä»£ç†ç³»ç»Ÿ** | âš ï¸ åŸºç¡€ | âœ… 9 ä¸ªä¸“ä¸šä»£ç† | âŒ | âš ï¸ â†’ å¯å®ç° |
| **æŒç»­å­¦ä¹ ** | âŒ | âœ… è‡ªåŠ¨æå– | âŒ | âŒ |
| **éªŒè¯å¾ªç¯** | âŒ | âœ… 6 é˜¶æ®µ | âŒ | âŒ â†’ å¯å®ç° |
| **Hook ç³»ç»Ÿ** | âœ… å®Œæ•´ | âœ… å®Œæ•´ | âŒ | âŒ |
| **Artifact é¢„è§ˆ** | âœ… Canvas | âŒ | âœ… 13+ ç±»å‹ | âŒ |
| **å®šæ—¶ä»»åŠ¡** | âš ï¸ åŸºç¡€ | âŒ | âŒ | âœ… **å®Œå–„** |
| **Trading é›†æˆ** | âŒ | âŒ | âŒ | âœ… **Freqtrade** |

### 11.3 CloudWork ä¼˜åŒ–è·¯çº¿å›¾ (æ›´æ–°ç‰ˆ)

åŸºäºå››é¡¹ç›®åˆ†æï¼Œ**é‡ç‚¹å€Ÿé‰´ ClawdBot å’Œ everything-claude-code**ï¼š

```
Phase 1 (1 å‘¨): æ¶ˆæ¯ä½“éªŒä¼˜åŒ–
â”œâ”€ âœ… æ¶ˆæ¯ç¼–è¾‘èŠ‚æµ (å€Ÿé‰´ ClawdBot) â­ é«˜ä»·å€¼
â”œâ”€ âœ… å·¥å…·è¯¦æƒ…å±•ç¤º (å€Ÿé‰´ ClawdBot) â­ é«˜ä»·å€¼
â”œâ”€ âœ… Markdown æ™ºèƒ½åˆ†å— (å€Ÿé‰´ ClawdBot)
â””â”€ âš ï¸ å¼ºåˆ¶å¤‡ä»½æŒ‡ä»¤ (WorkAny å¯å‘)

Phase 2 (2-3 å‘¨): å¼€å‘æ•ˆç‡å¢å¼º
â”œâ”€ ğŸ”„ ä¸“ä¸šå­ä»£ç† (å€Ÿé‰´ everything-cc) â­â­ æ ¸å¿ƒä»·å€¼
â”œâ”€ ğŸ”„ /verify éªŒè¯å‘½ä»¤ (å€Ÿé‰´ everything-cc) â­â­ æ ¸å¿ƒä»·å€¼
â”œâ”€ ğŸ”„ /plan + /review å‘½ä»¤ (å€Ÿé‰´ everything-cc)
â””â”€ ğŸ”„ Hook è‡ªåŠ¨æ£€æŸ¥ (å€Ÿé‰´ everything-cc)

Phase 3 (1-2 æœˆ): èƒ½åŠ›æ‰©å±•
â”œâ”€ å¤šåª’ä½“æ”¯æŒ (å›¾ç‰‡/è¯­éŸ³/æ–‡æ¡£)
â”œâ”€ ä¼šè¯æ¨¡å¼æå–å»ºè®® (å€Ÿé‰´ everything-cc)
â””â”€ MCP æœåŠ¡å™¨é›†æˆ

Phase 4 (é•¿æœŸ): æ¶æ„å‡çº§
â”œâ”€ Agent SDK è¿ç§»è¯„ä¼°
â”œâ”€ Telegram Mini App (å¯è§†åŒ–é¢„è§ˆ)
â””â”€ å¤šæ¸ é“é€‚é… (å¯é€‰)
```

**æ³¨æ„**: WorkAny çš„æ¡Œé¢å‰ç«¯ä»·å€¼æ— æ³•å€Ÿé‰´ï¼Œé‡ç‚¹æ”¾åœ¨ ClawdBot å’Œ everything-claude-code

### 11.4 æœ€ç»ˆå®šä½å»ºè®®

**CloudWork = è¿œç¨‹å¼€å‘åˆ©å™¨ + é‡åŒ–äº¤æ˜“ä¸“å®¶ + è¿ç»´è‡ªåŠ¨åŒ–**

æ ¸å¿ƒç«äº‰åŠ›ï¼š
1. âœ… **è¿œç¨‹è®¿é—®** - Telegram éšå¤„å¯ç”¨
2. âœ… **å®šæ—¶ä»»åŠ¡** - ä¸šç•Œé¢†å…ˆçš„ cron + é€šçŸ¥
3. âœ… **Trading é›†æˆ** - Freqtrade æ·±åº¦é›†æˆ
4. âœ… **æç®€éƒ¨ç½²** - 5 åˆ†é’Ÿä¸Šæ‰‹
5. ğŸ”„ **å®‰å…¨å·¥ä½œæµ** - Plan-Execute + å¼ºåˆ¶å¤‡ä»½

ä¸è¿½èµ¶çš„æ–¹å‘ï¼š
- âŒ å¤šæ¸ é“ (ClawdBot å®šä½)
- âŒ Canvas å¯è§†åŒ– (æ¡Œé¢åº”ç”¨å®šä½)
- âŒ å®Œæ•´ Hook ç³»ç»Ÿ (æœ¬åœ°å¼€å‘å®šä½)

---

## å‚è€ƒèµ„æº

- [ClawdBot å®˜æ–¹æ–‡æ¡£](https://docs.clawd.bot)
- [ClawdBot GitHub](https://github.com/clawdbot/clawdbot)
- [everything-claude-code GitHub](https://github.com/affaan-m/everything-claude-code)
- [everything-claude-code çŸ­æŒ‡å—](https://x.com/affaanmustafa/status/2012378465664745795)
- [everything-claude-code é•¿æŒ‡å—](https://x.com/affaanmustafa/status/2014040193557471352)
- [Claude Agent SDK](https://github.com/anthropics/claude-code)
- [Telegram Bot API](https://core.telegram.org/bots/api)
- [Telegram Mini Apps](https://core.telegram.org/bots/webapps)
- [grammY æ¡†æ¶æ–‡æ¡£](https://grammy.dev)
- [LanceDB æ–‡æ¡£](https://lancedb.github.io/lancedb/)
- [WorkAny GitHub](https://github.com/workany-ai/workany)
- [Tauri æ¡†æ¶](https://tauri.app)
- [Hono Web æ¡†æ¶](https://hono.dev)
- [OpenAI Codex CLI](https://github.com/openai/codex)
